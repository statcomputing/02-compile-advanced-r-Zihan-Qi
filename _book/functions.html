<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Functions | Advanced R</title>
  <meta name="description" content="The book is designed primarily for R users who want to improve their programming skills and understanding of the language. It should also be useful for programmers coming to R from other languages, as help you to understand why R works the way it does." />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Functions | Advanced R" />
  <meta property="og:type" content="book" />
  <meta property="og:url" content="https://adv-r.hadley.nz/" />
  <meta property="og:image" content="https://adv-r.hadley.nz/cover.png" />
  <meta property="og:description" content="The book is designed primarily for R users who want to improve their programming skills and understanding of the language. It should also be useful for programmers coming to R from other languages, as help you to understand why R works the way it does." />
  <meta name="github-repo" content="hadley/adv-r" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Functions | Advanced R" />
  <meta name="twitter:site" content="@hadleywickham" />
  <meta name="twitter:description" content="The book is designed primarily for R users who want to improve their programming skills and understanding of the language. It should also be useful for programmers coming to R from other languages, as help you to understand why R works the way it does." />
  <meta name="twitter:image" content="https://adv-r.hadley.nz/cover.png" />

<meta name="author" content="Hadley Wickham" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="control-flow.html"/>
<link rel="next" href="environments.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-141212623-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-141212623-1');
</script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="adv-r.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><strong><a href="./">Advanced R</a></strong></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a><ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#other-books"><i class="fa fa-check"></i>Other books</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="preface.html"><a href="preface.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#why-r"><i class="fa fa-check"></i><b>1.1</b> Why R?</a></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#who-should-read"><i class="fa fa-check"></i><b>1.2</b> Who should read this book</a></li>
<li class="chapter" data-level="1.3" data-path="introduction.html"><a href="introduction.html#what-you-will-get"><i class="fa fa-check"></i><b>1.3</b> What you will get out of this book</a></li>
<li class="chapter" data-level="1.4" data-path="introduction.html"><a href="introduction.html#what-you-will-not-learn"><i class="fa fa-check"></i><b>1.4</b> What you will not learn</a></li>
<li class="chapter" data-level="1.5" data-path="introduction.html"><a href="introduction.html#meta-techniques"><i class="fa fa-check"></i><b>1.5</b> Meta-techniques</a></li>
<li class="chapter" data-level="1.6" data-path="introduction.html"><a href="introduction.html#recommended-reading"><i class="fa fa-check"></i><b>1.6</b> Recommended reading</a></li>
<li class="chapter" data-level="1.7" data-path="introduction.html"><a href="introduction.html#getting-help"><i class="fa fa-check"></i><b>1.7</b> Getting help</a></li>
<li class="chapter" data-level="1.8" data-path="introduction.html"><a href="introduction.html#intro-ack"><i class="fa fa-check"></i><b>1.8</b> Acknowledgments</a></li>
<li class="chapter" data-level="1.9" data-path="introduction.html"><a href="introduction.html#conventions"><i class="fa fa-check"></i><b>1.9</b> Conventions</a></li>
<li class="chapter" data-level="1.10" data-path="introduction.html"><a href="introduction.html#colophon"><i class="fa fa-check"></i><b>1.10</b> Colophon</a></li>
</ul></li>
<li class="part"><span><b>I Foundations</b></span></li>
<li class="chapter" data-level="" data-path="foundations-intro.html"><a href="foundations-intro.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="2" data-path="names-values.html"><a href="names-values.html"><i class="fa fa-check"></i><b>2</b> Names and values</a><ul>
<li class="chapter" data-level="2.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#quiz"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#sources"><i class="fa fa-check"></i>Sources</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="names-values.html"><a href="names-values.html#binding-basics"><i class="fa fa-check"></i><b>2.2</b> Binding basics</a><ul>
<li class="chapter" data-level="2.2.1" data-path="names-values.html"><a href="names-values.html#non-syntactic"><i class="fa fa-check"></i><b>2.2.1</b> Non-syntactic names</a></li>
<li class="chapter" data-level="2.2.2" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>2.2.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="names-values.html"><a href="names-values.html#copy-on-modify"><i class="fa fa-check"></i><b>2.3</b> Copy-on-modify</a><ul>
<li class="chapter" data-level="2.3.1" data-path="names-values.html"><a href="names-values.html#tracemem"><i class="fa fa-check"></i><b>2.3.1</b> <code>tracemem()</code></a></li>
<li class="chapter" data-level="2.3.2" data-path="names-values.html"><a href="names-values.html#function-calls"><i class="fa fa-check"></i><b>2.3.2</b> Function calls</a></li>
<li class="chapter" data-level="2.3.3" data-path="names-values.html"><a href="names-values.html#list-references"><i class="fa fa-check"></i><b>2.3.3</b> Lists</a></li>
<li class="chapter" data-level="2.3.4" data-path="names-values.html"><a href="names-values.html#df-modify"><i class="fa fa-check"></i><b>2.3.4</b> Data frames</a></li>
<li class="chapter" data-level="2.3.5" data-path="names-values.html"><a href="names-values.html#character-vectors"><i class="fa fa-check"></i><b>2.3.5</b> Character vectors</a></li>
<li class="chapter" data-level="2.3.6" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>2.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="names-values.html"><a href="names-values.html#object-size"><i class="fa fa-check"></i><b>2.4</b> Object size</a><ul>
<li class="chapter" data-level="2.4.1" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>2.4.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="names-values.html"><a href="names-values.html#modify-in-place"><i class="fa fa-check"></i><b>2.5</b> Modify-in-place</a><ul>
<li class="chapter" data-level="2.5.1" data-path="names-values.html"><a href="names-values.html#single-binding"><i class="fa fa-check"></i><b>2.5.1</b> Objects with a single binding</a></li>
<li class="chapter" data-level="2.5.2" data-path="names-values.html"><a href="names-values.html#env-modify"><i class="fa fa-check"></i><b>2.5.2</b> Environments</a></li>
<li class="chapter" data-level="2.5.3" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>2.5.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="names-values.html"><a href="names-values.html#gc"><i class="fa fa-check"></i><b>2.6</b> Unbinding and the garbage collector</a></li>
<li class="chapter" data-level="2.7" data-path="names-values.html"><a href="names-values.html#names-values-answers"><i class="fa fa-check"></i><b>2.7</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="vectors-chap.html"><a href="vectors-chap.html"><i class="fa fa-check"></i><b>3</b> Vectors</a><ul>
<li class="chapter" data-level="3.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>3.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#quiz"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="vectors-chap.html"><a href="vectors-chap.html#atomic-vectors"><i class="fa fa-check"></i><b>3.2</b> Atomic vectors</a><ul>
<li class="chapter" data-level="3.2.1" data-path="vectors-chap.html"><a href="vectors-chap.html#scalars"><i class="fa fa-check"></i><b>3.2.1</b> Scalars</a></li>
<li class="chapter" data-level="3.2.2" data-path="vectors-chap.html"><a href="vectors-chap.html#atomic-constructing"><i class="fa fa-check"></i><b>3.2.2</b> Making longer vectors with <code>c()</code></a></li>
<li class="chapter" data-level="3.2.3" data-path="vectors-chap.html"><a href="vectors-chap.html#missing-values"><i class="fa fa-check"></i><b>3.2.3</b> Missing values</a></li>
<li class="chapter" data-level="3.2.4" data-path="vectors-chap.html"><a href="vectors-chap.html#testing-and-coercion"><i class="fa fa-check"></i><b>3.2.4</b> Testing and coercion</a></li>
<li class="chapter" data-level="3.2.5" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>3.2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="vectors-chap.html"><a href="vectors-chap.html#attributes"><i class="fa fa-check"></i><b>3.3</b> Attributes</a><ul>
<li class="chapter" data-level="3.3.1" data-path="vectors-chap.html"><a href="vectors-chap.html#getting-and-setting"><i class="fa fa-check"></i><b>3.3.1</b> Getting and setting</a></li>
<li class="chapter" data-level="3.3.2" data-path="vectors-chap.html"><a href="vectors-chap.html#attr-names"><i class="fa fa-check"></i><b>3.3.2</b> Names</a></li>
<li class="chapter" data-level="3.3.3" data-path="vectors-chap.html"><a href="vectors-chap.html#attr-dims"><i class="fa fa-check"></i><b>3.3.3</b> Dimensions</a></li>
<li class="chapter" data-level="3.3.4" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>3.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="vectors-chap.html"><a href="vectors-chap.html#s3-atomic-vectors"><i class="fa fa-check"></i><b>3.4</b> S3 atomic vectors</a><ul>
<li class="chapter" data-level="3.4.1" data-path="vectors-chap.html"><a href="vectors-chap.html#factors"><i class="fa fa-check"></i><b>3.4.1</b> Factors</a></li>
<li class="chapter" data-level="3.4.2" data-path="vectors-chap.html"><a href="vectors-chap.html#dates"><i class="fa fa-check"></i><b>3.4.2</b> Dates</a></li>
<li class="chapter" data-level="3.4.3" data-path="vectors-chap.html"><a href="vectors-chap.html#date-times"><i class="fa fa-check"></i><b>3.4.3</b> Date-times</a></li>
<li class="chapter" data-level="3.4.4" data-path="vectors-chap.html"><a href="vectors-chap.html#durations"><i class="fa fa-check"></i><b>3.4.4</b> Durations</a></li>
<li class="chapter" data-level="3.4.5" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>3.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="vectors-chap.html"><a href="vectors-chap.html#lists"><i class="fa fa-check"></i><b>3.5</b> Lists</a><ul>
<li class="chapter" data-level="3.5.1" data-path="vectors-chap.html"><a href="vectors-chap.html#list-creating"><i class="fa fa-check"></i><b>3.5.1</b> Creating</a></li>
<li class="chapter" data-level="3.5.2" data-path="vectors-chap.html"><a href="vectors-chap.html#list-types"><i class="fa fa-check"></i><b>3.5.2</b> Testing and coercion</a></li>
<li class="chapter" data-level="3.5.3" data-path="vectors-chap.html"><a href="vectors-chap.html#list-array"><i class="fa fa-check"></i><b>3.5.3</b> Matrices and arrays</a></li>
<li class="chapter" data-level="3.5.4" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>3.5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="vectors-chap.html"><a href="vectors-chap.html#tibble"><i class="fa fa-check"></i><b>3.6</b> Data frames and tibbles</a><ul>
<li class="chapter" data-level="3.6.1" data-path="vectors-chap.html"><a href="vectors-chap.html#df-create"><i class="fa fa-check"></i><b>3.6.1</b> Creating</a></li>
<li class="chapter" data-level="3.6.2" data-path="vectors-chap.html"><a href="vectors-chap.html#rownames"><i class="fa fa-check"></i><b>3.6.2</b> Row names</a></li>
<li class="chapter" data-level="3.6.3" data-path="vectors-chap.html"><a href="vectors-chap.html#printing"><i class="fa fa-check"></i><b>3.6.3</b> Printing</a></li>
<li class="chapter" data-level="3.6.4" data-path="vectors-chap.html"><a href="vectors-chap.html#safe-subsetting"><i class="fa fa-check"></i><b>3.6.4</b> Subsetting</a></li>
<li class="chapter" data-level="3.6.5" data-path="vectors-chap.html"><a href="vectors-chap.html#df-test-coerce"><i class="fa fa-check"></i><b>3.6.5</b> Testing and coercing</a></li>
<li class="chapter" data-level="3.6.6" data-path="vectors-chap.html"><a href="vectors-chap.html#list-columns"><i class="fa fa-check"></i><b>3.6.6</b> List columns</a></li>
<li class="chapter" data-level="3.6.7" data-path="vectors-chap.html"><a href="vectors-chap.html#matrix-and-data-frame-columns"><i class="fa fa-check"></i><b>3.6.7</b> Matrix and data frame columns</a></li>
<li class="chapter" data-level="3.6.8" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-4"><i class="fa fa-check"></i><b>3.6.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="vectors-chap.html"><a href="vectors-chap.html#null"><i class="fa fa-check"></i><b>3.7</b> <code>NULL</code></a></li>
<li class="chapter" data-level="3.8" data-path="vectors-chap.html"><a href="vectors-chap.html#data-structure-answers"><i class="fa fa-check"></i><b>3.8</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="subsetting.html"><a href="subsetting.html"><i class="fa fa-check"></i><b>4</b> Subsetting</a><ul>
<li class="chapter" data-level="4.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>4.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#quiz"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="subsetting.html"><a href="subsetting.html#subset-multiple"><i class="fa fa-check"></i><b>4.2</b> Selecting multiple elements</a><ul>
<li class="chapter" data-level="4.2.1" data-path="vectors-chap.html"><a href="vectors-chap.html#atomic-vectors"><i class="fa fa-check"></i><b>4.2.1</b> Atomic vectors</a></li>
<li class="chapter" data-level="4.2.2" data-path="vectors-chap.html"><a href="vectors-chap.html#lists"><i class="fa fa-check"></i><b>4.2.2</b> Lists</a></li>
<li class="chapter" data-level="4.2.3" data-path="subsetting.html"><a href="subsetting.html#matrix-subsetting"><i class="fa fa-check"></i><b>4.2.3</b> Matrices and arrays</a></li>
<li class="chapter" data-level="4.2.4" data-path="subsetting.html"><a href="subsetting.html#df-subsetting"><i class="fa fa-check"></i><b>4.2.4</b> Data frames and tibbles</a></li>
<li class="chapter" data-level="4.2.5" data-path="subsetting.html"><a href="subsetting.html#simplify-preserve"><i class="fa fa-check"></i><b>4.2.5</b> Preserving dimensionality</a></li>
<li class="chapter" data-level="4.2.6" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>4.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="subsetting.html"><a href="subsetting.html#subset-single"><i class="fa fa-check"></i><b>4.3</b> Selecting a single element</a><ul>
<li class="chapter" data-level="4.3.1" data-path="subsetting.html"><a href="subsetting.html#section"><i class="fa fa-check"></i><b>4.3.1</b> <code>[[</code></a></li>
<li class="chapter" data-level="4.3.2" data-path="subsetting.html"><a href="subsetting.html#section-1"><i class="fa fa-check"></i><b>4.3.2</b> <code>$</code></a></li>
<li class="chapter" data-level="4.3.3" data-path="subsetting.html"><a href="subsetting.html#subsetting-oob"><i class="fa fa-check"></i><b>4.3.3</b> Missing and out-of-bounds indices</a></li>
<li class="chapter" data-level="4.3.4" data-path="subsetting.html"><a href="subsetting.html#and-slot"><i class="fa fa-check"></i><b>4.3.4</b> <code>@</code> and <code>slot()</code></a></li>
<li class="chapter" data-level="4.3.5" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>4.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="subsetting.html"><a href="subsetting.html#subassignment"><i class="fa fa-check"></i><b>4.4</b> Subsetting and assignment</a></li>
<li class="chapter" data-level="4.5" data-path="subsetting.html"><a href="subsetting.html#applications"><i class="fa fa-check"></i><b>4.5</b> Applications</a><ul>
<li class="chapter" data-level="4.5.1" data-path="subsetting.html"><a href="subsetting.html#lookup-tables"><i class="fa fa-check"></i><b>4.5.1</b> Lookup tables (character subsetting)</a></li>
<li class="chapter" data-level="4.5.2" data-path="subsetting.html"><a href="subsetting.html#matching-merging"><i class="fa fa-check"></i><b>4.5.2</b> Matching and merging by hand (integer subsetting)</a></li>
<li class="chapter" data-level="4.5.3" data-path="subsetting.html"><a href="subsetting.html#random-samples-and-bootstraps-integer-subsetting"><i class="fa fa-check"></i><b>4.5.3</b> Random samples and bootstraps (integer subsetting)</a></li>
<li class="chapter" data-level="4.5.4" data-path="subsetting.html"><a href="subsetting.html#ordering-integer-subsetting"><i class="fa fa-check"></i><b>4.5.4</b> Ordering (integer subsetting)</a></li>
<li class="chapter" data-level="4.5.5" data-path="subsetting.html"><a href="subsetting.html#expanding-aggregated-counts-integer-subsetting"><i class="fa fa-check"></i><b>4.5.5</b> Expanding aggregated counts (integer subsetting)</a></li>
<li class="chapter" data-level="4.5.6" data-path="subsetting.html"><a href="subsetting.html#removing-columns-from-data-frames-character"><i class="fa fa-check"></i><b>4.5.6</b> Removing columns from data frames (character )</a></li>
<li class="chapter" data-level="4.5.7" data-path="subsetting.html"><a href="subsetting.html#selecting-rows-based-on-a-condition-logical-subsetting"><i class="fa fa-check"></i><b>4.5.7</b> Selecting rows based on a condition (logical subsetting)</a></li>
<li class="chapter" data-level="4.5.8" data-path="subsetting.html"><a href="subsetting.html#boolean-algebra-versus-sets-logical-and-integer"><i class="fa fa-check"></i><b>4.5.8</b> Boolean algebra versus sets (logical and integer )</a></li>
<li class="chapter" data-level="4.5.9" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>4.5.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="subsetting.html"><a href="subsetting.html#subsetting-answers"><i class="fa fa-check"></i><b>4.6</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="control-flow.html"><a href="control-flow.html"><i class="fa fa-check"></i><b>5</b> Control flow</a><ul>
<li class="chapter" data-level="5.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>5.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#quiz"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="control-flow.html"><a href="control-flow.html#choices"><i class="fa fa-check"></i><b>5.2</b> Choices</a><ul>
<li class="chapter" data-level="5.2.1" data-path="control-flow.html"><a href="control-flow.html#invalid-inputs"><i class="fa fa-check"></i><b>5.2.1</b> Invalid inputs</a></li>
<li class="chapter" data-level="5.2.2" data-path="control-flow.html"><a href="control-flow.html#vectorised-if"><i class="fa fa-check"></i><b>5.2.2</b> Vectorised if</a></li>
<li class="chapter" data-level="5.2.3" data-path="control-flow.html"><a href="control-flow.html#switch"><i class="fa fa-check"></i><b>5.2.3</b> <code>switch()</code> statement</a></li>
<li class="chapter" data-level="5.2.4" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>5.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="control-flow.html"><a href="control-flow.html#loops"><i class="fa fa-check"></i><b>5.3</b> Loops</a><ul>
<li class="chapter" data-level="5.3.1" data-path="control-flow.html"><a href="control-flow.html#common-pitfalls"><i class="fa fa-check"></i><b>5.3.1</b> Common pitfalls</a></li>
<li class="chapter" data-level="5.3.2" data-path="control-flow.html"><a href="control-flow.html#for-family"><i class="fa fa-check"></i><b>5.3.2</b> Related tools</a></li>
<li class="chapter" data-level="5.3.3" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>5.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="control-flow.html"><a href="control-flow.html#control-flow-answers"><i class="fa fa-check"></i><b>5.4</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="functions.html"><a href="functions.html"><i class="fa fa-check"></i><b>6</b> Functions</a><ul>
<li class="chapter" data-level="6.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>6.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#quiz"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="6.2" data-path="functions.html"><a href="functions.html#function-fundamentals"><i class="fa fa-check"></i><b>6.2</b> Function fundamentals</a><ul>
<li class="chapter" data-level="6.2.1" data-path="functions.html"><a href="functions.html#fun-components"><i class="fa fa-check"></i><b>6.2.1</b> Function components</a></li>
<li class="chapter" data-level="6.2.2" data-path="functions.html"><a href="functions.html#primitive-functions"><i class="fa fa-check"></i><b>6.2.2</b> Primitive functions</a></li>
<li class="chapter" data-level="6.2.3" data-path="functions.html"><a href="functions.html#first-class-functions"><i class="fa fa-check"></i><b>6.2.3</b> First-class functions</a></li>
<li class="chapter" data-level="6.2.4" data-path="functions.html"><a href="functions.html#invoking-a-function"><i class="fa fa-check"></i><b>6.2.4</b> Invoking a function</a></li>
<li class="chapter" data-level="6.2.5" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>6.2.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="functions.html"><a href="functions.html#function-composition"><i class="fa fa-check"></i><b>6.3</b> Function composition</a></li>
<li class="chapter" data-level="6.4" data-path="functions.html"><a href="functions.html#lexical-scoping"><i class="fa fa-check"></i><b>6.4</b> Lexical scoping</a><ul>
<li class="chapter" data-level="6.4.1" data-path="functions.html"><a href="functions.html#name-masking"><i class="fa fa-check"></i><b>6.4.1</b> Name masking</a></li>
<li class="chapter" data-level="6.4.2" data-path="functions.html"><a href="functions.html#functions-versus-variables"><i class="fa fa-check"></i><b>6.4.2</b> Functions versus variables</a></li>
<li class="chapter" data-level="6.4.3" data-path="functions.html"><a href="functions.html#fresh-start"><i class="fa fa-check"></i><b>6.4.3</b> A fresh start</a></li>
<li class="chapter" data-level="6.4.4" data-path="functions.html"><a href="functions.html#dynamic-lookup"><i class="fa fa-check"></i><b>6.4.4</b> Dynamic lookup</a></li>
<li class="chapter" data-level="6.4.5" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>6.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="functions.html"><a href="functions.html#lazy-evaluation"><i class="fa fa-check"></i><b>6.5</b> Lazy evaluation</a><ul>
<li class="chapter" data-level="6.5.1" data-path="functions.html"><a href="functions.html#promises"><i class="fa fa-check"></i><b>6.5.1</b> Promises</a></li>
<li class="chapter" data-level="6.5.2" data-path="functions.html"><a href="functions.html#default-arguments"><i class="fa fa-check"></i><b>6.5.2</b> Default arguments</a></li>
<li class="chapter" data-level="6.5.3" data-path="functions.html"><a href="functions.html#missing-arguments"><i class="fa fa-check"></i><b>6.5.3</b> Missing arguments</a></li>
<li class="chapter" data-level="6.5.4" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>6.5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="functions.html"><a href="functions.html#fun-dot-dot-dot"><i class="fa fa-check"></i><b>6.6</b> <code>...</code> (dot-dot-dot)</a><ul>
<li class="chapter" data-level="6.6.1" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>6.6.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="functions.html"><a href="functions.html#exiting-a-function"><i class="fa fa-check"></i><b>6.7</b> Exiting a function</a><ul>
<li class="chapter" data-level="6.7.1" data-path="functions.html"><a href="functions.html#implicit-versus-explicit-returns"><i class="fa fa-check"></i><b>6.7.1</b> Implicit versus explicit returns</a></li>
<li class="chapter" data-level="6.7.2" data-path="functions.html"><a href="functions.html#invisible"><i class="fa fa-check"></i><b>6.7.2</b> Invisible values</a></li>
<li class="chapter" data-level="6.7.3" data-path="functions.html"><a href="functions.html#errors"><i class="fa fa-check"></i><b>6.7.3</b> Errors</a></li>
<li class="chapter" data-level="6.7.4" data-path="functions.html"><a href="functions.html#on-exit"><i class="fa fa-check"></i><b>6.7.4</b> Exit handlers</a></li>
<li class="chapter" data-level="6.7.5" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-4"><i class="fa fa-check"></i><b>6.7.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="functions.html"><a href="functions.html#function-forms"><i class="fa fa-check"></i><b>6.8</b> Function forms</a><ul>
<li class="chapter" data-level="6.8.1" data-path="functions.html"><a href="functions.html#prefix-transform"><i class="fa fa-check"></i><b>6.8.1</b> Rewriting to prefix form</a></li>
<li class="chapter" data-level="6.8.2" data-path="functions.html"><a href="functions.html#prefix-form"><i class="fa fa-check"></i><b>6.8.2</b> Prefix form</a></li>
<li class="chapter" data-level="6.8.3" data-path="functions.html"><a href="functions.html#infix-functions"><i class="fa fa-check"></i><b>6.8.3</b> Infix functions</a></li>
<li class="chapter" data-level="6.8.4" data-path="functions.html"><a href="functions.html#replacement-functions"><i class="fa fa-check"></i><b>6.8.4</b> Replacement functions</a></li>
<li class="chapter" data-level="6.8.5" data-path="functions.html"><a href="functions.html#special-forms"><i class="fa fa-check"></i><b>6.8.5</b> Special forms</a></li>
<li class="chapter" data-level="6.8.6" data-path="functions.html"><a href="functions.html#exercises-5"><i class="fa fa-check"></i><b>6.8.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6.9" data-path="functions.html"><a href="functions.html#function-answers"><i class="fa fa-check"></i><b>6.9</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="environments.html"><a href="environments.html"><i class="fa fa-check"></i><b>7</b> Environments</a><ul>
<li class="chapter" data-level="7.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>7.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#quiz"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="environments.html"><a href="environments.html#env-basics"><i class="fa fa-check"></i><b>7.2</b> Environment basics</a><ul>
<li class="chapter" data-level="7.2.1" data-path="environments.html"><a href="environments.html#basics"><i class="fa fa-check"></i><b>7.2.1</b> Basics</a></li>
<li class="chapter" data-level="7.2.2" data-path="environments.html"><a href="environments.html#important-environments"><i class="fa fa-check"></i><b>7.2.2</b> Important environments</a></li>
<li class="chapter" data-level="7.2.3" data-path="environments.html"><a href="environments.html#parents"><i class="fa fa-check"></i><b>7.2.3</b> Parents</a></li>
<li class="chapter" data-level="7.2.4" data-path="environments.html"><a href="environments.html#super-assignment--"><i class="fa fa-check"></i><b>7.2.4</b> Super assignment, <code>&lt;&lt;-</code></a></li>
<li class="chapter" data-level="7.2.5" data-path="vectors-chap.html"><a href="vectors-chap.html#getting-and-setting"><i class="fa fa-check"></i><b>7.2.5</b> Getting and setting</a></li>
<li class="chapter" data-level="7.2.6" data-path="environments.html"><a href="environments.html#advanced-bindings"><i class="fa fa-check"></i><b>7.2.6</b> Advanced bindings</a></li>
<li class="chapter" data-level="7.2.7" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>7.2.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="environments.html"><a href="environments.html#env-recursion"><i class="fa fa-check"></i><b>7.3</b> Recursing over environments</a><ul>
<li class="chapter" data-level="7.3.1" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>7.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="environments.html"><a href="environments.html#special-environments"><i class="fa fa-check"></i><b>7.4</b> Special environments</a><ul>
<li class="chapter" data-level="7.4.1" data-path="environments.html"><a href="environments.html#search-path"><i class="fa fa-check"></i><b>7.4.1</b> Package environments and the search path</a></li>
<li class="chapter" data-level="7.4.2" data-path="environments.html"><a href="environments.html#function-environments"><i class="fa fa-check"></i><b>7.4.2</b> The function environment</a></li>
<li class="chapter" data-level="7.4.3" data-path="environments.html"><a href="environments.html#namespaces"><i class="fa fa-check"></i><b>7.4.3</b> Namespaces</a></li>
<li class="chapter" data-level="7.4.4" data-path="environments.html"><a href="environments.html#execution-environments"><i class="fa fa-check"></i><b>7.4.4</b> Execution environments</a></li>
<li class="chapter" data-level="7.4.5" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>7.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="environments.html"><a href="environments.html#call-stack"><i class="fa fa-check"></i><b>7.5</b> Call stacks</a><ul>
<li class="chapter" data-level="7.5.1" data-path="environments.html"><a href="environments.html#simple-stack"><i class="fa fa-check"></i><b>7.5.1</b> Simple call stacks</a></li>
<li class="chapter" data-level="7.5.2" data-path="environments.html"><a href="environments.html#lazy-call-stack"><i class="fa fa-check"></i><b>7.5.2</b> Lazy evaluation</a></li>
<li class="chapter" data-level="7.5.3" data-path="environments.html"><a href="environments.html#frames"><i class="fa fa-check"></i><b>7.5.3</b> Frames</a></li>
<li class="chapter" data-level="7.5.4" data-path="environments.html"><a href="environments.html#dynamic-scope"><i class="fa fa-check"></i><b>7.5.4</b> Dynamic scope</a></li>
<li class="chapter" data-level="7.5.5" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>7.5.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="environments.html"><a href="environments.html#explicit-envs"><i class="fa fa-check"></i><b>7.6</b> As data structures</a></li>
<li class="chapter" data-level="7.7" data-path="environments.html"><a href="environments.html#env-answers"><i class="fa fa-check"></i><b>7.7</b> Quiz answers</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="conditions.html"><a href="conditions.html"><i class="fa fa-check"></i><b>8</b> Conditions</a><ul>
<li class="chapter" data-level="8.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>8.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#quiz"><i class="fa fa-check"></i>Quiz</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="8.1.1" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i><b>8.1.1</b> Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="conditions.html"><a href="conditions.html#signalling-conditions"><i class="fa fa-check"></i><b>8.2</b> Signalling conditions</a><ul>
<li class="chapter" data-level="8.2.1" data-path="functions.html"><a href="functions.html#errors"><i class="fa fa-check"></i><b>8.2.1</b> Errors</a></li>
<li class="chapter" data-level="8.2.2" data-path="conditions.html"><a href="conditions.html#warnings"><i class="fa fa-check"></i><b>8.2.2</b> Warnings</a></li>
<li class="chapter" data-level="8.2.3" data-path="conditions.html"><a href="conditions.html#messages"><i class="fa fa-check"></i><b>8.2.3</b> Messages</a></li>
<li class="chapter" data-level="8.2.4" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>8.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="conditions.html"><a href="conditions.html#ignoring-conditions"><i class="fa fa-check"></i><b>8.3</b> Ignoring conditions</a></li>
<li class="chapter" data-level="8.4" data-path="conditions.html"><a href="conditions.html#handling-conditions"><i class="fa fa-check"></i><b>8.4</b> Handling conditions</a><ul>
<li class="chapter" data-level="8.4.1" data-path="conditions.html"><a href="conditions.html#condition-objects"><i class="fa fa-check"></i><b>8.4.1</b> Condition objects</a></li>
<li class="chapter" data-level="8.4.2" data-path="conditions.html"><a href="conditions.html#exiting-handlers"><i class="fa fa-check"></i><b>8.4.2</b> Exiting handlers</a></li>
<li class="chapter" data-level="8.4.3" data-path="conditions.html"><a href="conditions.html#calling-handlers"><i class="fa fa-check"></i><b>8.4.3</b> Calling handlers</a></li>
<li class="chapter" data-level="8.4.4" data-path="conditions.html"><a href="conditions.html#call-stacks"><i class="fa fa-check"></i><b>8.4.4</b> Call stacks</a></li>
<li class="chapter" data-level="8.4.5" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>8.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="conditions.html"><a href="conditions.html#custom-conditions"><i class="fa fa-check"></i><b>8.5</b> Custom conditions</a><ul>
<li class="chapter" data-level="8.5.1" data-path="conditions.html"><a href="conditions.html#motivation"><i class="fa fa-check"></i><b>8.5.1</b> Motivation</a></li>
<li class="chapter" data-level="8.5.2" data-path="conditions.html"><a href="conditions.html#signalling"><i class="fa fa-check"></i><b>8.5.2</b> Signalling</a></li>
<li class="chapter" data-level="8.5.3" data-path="conditions.html"><a href="conditions.html#handling"><i class="fa fa-check"></i><b>8.5.3</b> Handling</a></li>
<li class="chapter" data-level="8.5.4" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>8.5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="conditions.html"><a href="conditions.html#condition-applications"><i class="fa fa-check"></i><b>8.6</b> Applications</a><ul>
<li class="chapter" data-level="8.6.1" data-path="conditions.html"><a href="conditions.html#failure-value"><i class="fa fa-check"></i><b>8.6.1</b> Failure value</a></li>
<li class="chapter" data-level="8.6.2" data-path="conditions.html"><a href="conditions.html#try-success-failure"><i class="fa fa-check"></i><b>8.6.2</b> Success and failure values</a></li>
<li class="chapter" data-level="8.6.3" data-path="conditions.html"><a href="conditions.html#resignal"><i class="fa fa-check"></i><b>8.6.3</b> Resignal</a></li>
<li class="chapter" data-level="8.6.4" data-path="conditions.html"><a href="conditions.html#record"><i class="fa fa-check"></i><b>8.6.4</b> Record</a></li>
<li class="chapter" data-level="8.6.5" data-path="conditions.html"><a href="conditions.html#no-default-behaviour"><i class="fa fa-check"></i><b>8.6.5</b> No default behaviour</a></li>
<li class="chapter" data-level="8.6.6" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>8.6.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="conditions.html"><a href="conditions.html#conditions-answers"><i class="fa fa-check"></i><b>8.7</b> Quiz answers</a></li>
</ul></li>
<li class="part"><span><b>II Functional programming</b></span></li>
<li class="chapter" data-level="" data-path="fp.html"><a href="fp.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="fp.html"><a href="fp.html#functional-programming-languages"><i class="fa fa-check"></i>Functional programming languages</a></li>
<li class="chapter" data-level="" data-path="fp.html"><a href="fp.html#functional-style"><i class="fa fa-check"></i>Functional style</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="functionals.html"><a href="functionals.html"><i class="fa fa-check"></i><b>9</b> Functionals</a><ul>
<li class="chapter" data-level="9.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>9.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="functionals.html"><a href="functionals.html#map"><i class="fa fa-check"></i><b>9.2</b> My first functional: <code>map()</code></a><ul>
<li class="chapter" data-level="9.2.1" data-path="functionals.html"><a href="functionals.html#map-atomic"><i class="fa fa-check"></i><b>9.2.1</b> Producing atomic vectors</a></li>
<li class="chapter" data-level="9.2.2" data-path="functionals.html"><a href="functionals.html#purrr-shortcuts"><i class="fa fa-check"></i><b>9.2.2</b> Anonymous functions and shortcuts</a></li>
<li class="chapter" data-level="9.2.3" data-path="functionals.html"><a href="functionals.html#passing-arguments"><i class="fa fa-check"></i><b>9.2.3</b> Passing arguments with <code>...</code></a></li>
<li class="chapter" data-level="9.2.4" data-path="functionals.html"><a href="functionals.html#argument-names"><i class="fa fa-check"></i><b>9.2.4</b> Argument names</a></li>
<li class="chapter" data-level="9.2.5" data-path="functionals.html"><a href="functionals.html#change-argument"><i class="fa fa-check"></i><b>9.2.5</b> Varying another argument</a></li>
<li class="chapter" data-level="9.2.6" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>9.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="functionals.html"><a href="functionals.html#purrr-style"><i class="fa fa-check"></i><b>9.3</b> Purrr style</a></li>
<li class="chapter" data-level="9.4" data-path="functionals.html"><a href="functionals.html#map-variants"><i class="fa fa-check"></i><b>9.4</b> Map variants</a><ul>
<li class="chapter" data-level="9.4.1" data-path="functionals.html"><a href="functionals.html#modify"><i class="fa fa-check"></i><b>9.4.1</b> Same type of output as input: <code>modify()</code></a></li>
<li class="chapter" data-level="9.4.2" data-path="functionals.html"><a href="functionals.html#map2"><i class="fa fa-check"></i><b>9.4.2</b> Two inputs: <code>map2()</code> and friends</a></li>
<li class="chapter" data-level="9.4.3" data-path="functionals.html"><a href="functionals.html#no-outputs-walk-and-friends"><i class="fa fa-check"></i><b>9.4.3</b> No outputs: <code>walk()</code> and friends</a></li>
<li class="chapter" data-level="9.4.4" data-path="functionals.html"><a href="functionals.html#iterating-over-values-and-indices"><i class="fa fa-check"></i><b>9.4.4</b> Iterating over values and indices</a></li>
<li class="chapter" data-level="9.4.5" data-path="functionals.html"><a href="functionals.html#pmap"><i class="fa fa-check"></i><b>9.4.5</b> Any number of inputs: <code>pmap()</code> and friends</a></li>
<li class="chapter" data-level="9.4.6" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>9.4.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="functionals.html"><a href="functionals.html#reduce"><i class="fa fa-check"></i><b>9.5</b> Reduce family</a><ul>
<li class="chapter" data-level="9.5.1" data-path="environments.html"><a href="environments.html#basics"><i class="fa fa-check"></i><b>9.5.1</b> Basics</a></li>
<li class="chapter" data-level="9.5.2" data-path="functionals.html"><a href="functionals.html#accumulate"><i class="fa fa-check"></i><b>9.5.2</b> Accumulate</a></li>
<li class="chapter" data-level="9.5.3" data-path="functionals.html"><a href="functionals.html#output-types"><i class="fa fa-check"></i><b>9.5.3</b> Output types</a></li>
<li class="chapter" data-level="9.5.4" data-path="functionals.html"><a href="functionals.html#multiple-inputs"><i class="fa fa-check"></i><b>9.5.4</b> Multiple inputs</a></li>
<li class="chapter" data-level="9.5.5" data-path="functionals.html"><a href="functionals.html#map-reduce"><i class="fa fa-check"></i><b>9.5.5</b> Map-reduce</a></li>
</ul></li>
<li class="chapter" data-level="9.6" data-path="functionals.html"><a href="functionals.html#predicate-functionals"><i class="fa fa-check"></i><b>9.6</b> Predicate functionals</a><ul>
<li class="chapter" data-level="9.6.1" data-path="functionals.html"><a href="functionals.html#basics-1"><i class="fa fa-check"></i><b>9.6.1</b> Basics</a></li>
<li class="chapter" data-level="9.6.2" data-path="functionals.html"><a href="functionals.html#predicate-map"><i class="fa fa-check"></i><b>9.6.2</b> Map variants</a></li>
<li class="chapter" data-level="9.6.3" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>9.6.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="functionals.html"><a href="functionals.html#base-functionals"><i class="fa fa-check"></i><b>9.7</b> Base functionals</a><ul>
<li class="chapter" data-level="9.7.1" data-path="functionals.html"><a href="functionals.html#matrices-and-arrays"><i class="fa fa-check"></i><b>9.7.1</b> Matrices and arrays</a></li>
<li class="chapter" data-level="9.7.2" data-path="functionals.html"><a href="functionals.html#mathematical-concerns"><i class="fa fa-check"></i><b>9.7.2</b> Mathematical concerns</a></li>
<li class="chapter" data-level="9.7.3" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>9.7.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="function-factories.html"><a href="function-factories.html"><i class="fa fa-check"></i><b>10</b> Function factories</a><ul>
<li class="chapter" data-level="10.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>10.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="function-factories.html"><a href="function-factories.html#factory-fundamentals"><i class="fa fa-check"></i><b>10.2</b> Factory fundamentals</a><ul>
<li class="chapter" data-level="10.2.1" data-path="environments.html"><a href="environments.html#environments"><i class="fa fa-check"></i><b>10.2.1</b> Environments</a></li>
<li class="chapter" data-level="10.2.2" data-path="function-factories.html"><a href="function-factories.html#diagram-conventions"><i class="fa fa-check"></i><b>10.2.2</b> Diagram conventions</a></li>
<li class="chapter" data-level="10.2.3" data-path="function-factories.html"><a href="function-factories.html#forcing-evaluation"><i class="fa fa-check"></i><b>10.2.3</b> Forcing evaluation</a></li>
<li class="chapter" data-level="10.2.4" data-path="function-factories.html"><a href="function-factories.html#stateful-funs"><i class="fa fa-check"></i><b>10.2.4</b> Stateful functions</a></li>
<li class="chapter" data-level="10.2.5" data-path="function-factories.html"><a href="function-factories.html#factory-pitfalls"><i class="fa fa-check"></i><b>10.2.5</b> Garbage collection</a></li>
<li class="chapter" data-level="10.2.6" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>10.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="function-factories.html"><a href="function-factories.html#graph-fact"><i class="fa fa-check"></i><b>10.3</b> Graphical factories</a><ul>
<li class="chapter" data-level="10.3.1" data-path="function-factories.html"><a href="function-factories.html#labelling"><i class="fa fa-check"></i><b>10.3.1</b> Labelling</a></li>
<li class="chapter" data-level="10.3.2" data-path="function-factories.html"><a href="function-factories.html#histogram-bins"><i class="fa fa-check"></i><b>10.3.2</b> Histogram bins</a></li>
<li class="chapter" data-level="10.3.3" data-path="function-factories.html"><a href="function-factories.html#ggsave"><i class="fa fa-check"></i><b>10.3.3</b> <code>ggsave()</code></a></li>
<li class="chapter" data-level="10.3.4" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>10.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="function-factories.html"><a href="function-factories.html#stat-fact"><i class="fa fa-check"></i><b>10.4</b> Statistical factories</a><ul>
<li class="chapter" data-level="10.4.1" data-path="function-factories.html"><a href="function-factories.html#box-cox-transformation"><i class="fa fa-check"></i><b>10.4.1</b> Box-Cox transformation</a></li>
<li class="chapter" data-level="10.4.2" data-path="function-factories.html"><a href="function-factories.html#bootstrap-generators"><i class="fa fa-check"></i><b>10.4.2</b> Bootstrap generators</a></li>
<li class="chapter" data-level="10.4.3" data-path="function-factories.html"><a href="function-factories.html#MLE"><i class="fa fa-check"></i><b>10.4.3</b> Maximum likelihood estimation</a></li>
<li class="chapter" data-level="10.4.4" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>10.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="function-factories.html"><a href="function-factories.html#functional-factories"><i class="fa fa-check"></i><b>10.5</b> Function factories + functionals</a><ul>
<li class="chapter" data-level="10.5.1" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>10.5.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="function-operators.html"><a href="function-operators.html"><i class="fa fa-check"></i><b>11</b> Function operators</a><ul>
<li class="chapter" data-level="11.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>11.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="function-operators.html"><a href="function-operators.html#existing-fos"><i class="fa fa-check"></i><b>11.2</b> Existing function operators</a><ul>
<li class="chapter" data-level="11.2.1" data-path="function-operators.html"><a href="function-operators.html#safely"><i class="fa fa-check"></i><b>11.2.1</b> Capturing errors with <code>purrr::safely()</code></a></li>
<li class="chapter" data-level="11.2.2" data-path="function-operators.html"><a href="function-operators.html#memoise"><i class="fa fa-check"></i><b>11.2.2</b> Caching computations with <code>memoise::memoise()</code></a></li>
<li class="chapter" data-level="11.2.3" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>11.2.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="function-operators.html"><a href="function-operators.html#fo-case-study"><i class="fa fa-check"></i><b>11.3</b> Case study: Creating your own function operators</a><ul>
<li class="chapter" data-level="11.3.1" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>11.3.1</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>III Object-oriented programming</b></span></li>
<li class="chapter" data-level="" data-path="oo.html"><a href="oo.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="oo.html"><a href="oo.html#oop-systems"><i class="fa fa-check"></i>OOP systems</a></li>
<li class="chapter" data-level="" data-path="oo.html"><a href="oo.html#oop-in-r"><i class="fa fa-check"></i>OOP in R</a></li>
<li class="chapter" data-level="" data-path="oo.html"><a href="oo.html#sloop"><i class="fa fa-check"></i>sloop</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="base-types.html"><a href="base-types.html"><i class="fa fa-check"></i><b>12</b> Base types</a><ul>
<li class="chapter" data-level="12.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>12.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="base-types.html"><a href="base-types.html#base-vs-oo"><i class="fa fa-check"></i><b>12.2</b> Base versus OO objects</a></li>
<li class="chapter" data-level="12.3" data-path="base-types.html"><a href="base-types.html#base-types-2"><i class="fa fa-check"></i><b>12.3</b> Base types</a><ul>
<li class="chapter" data-level="12.3.1" data-path="base-types.html"><a href="base-types.html#numeric-type"><i class="fa fa-check"></i><b>12.3.1</b> Numeric type</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="s3.html"><a href="s3.html"><i class="fa fa-check"></i><b>13</b> S3</a><ul>
<li class="chapter" data-level="13.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>13.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="s3.html"><a href="s3.html#s3-basics"><i class="fa fa-check"></i><b>13.2</b> Basics</a><ul>
<li class="chapter" data-level="13.2.1" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>13.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="s3.html"><a href="s3.html#s3-classes"><i class="fa fa-check"></i><b>13.3</b> Classes</a><ul>
<li class="chapter" data-level="13.3.1" data-path="s3.html"><a href="s3.html#s3-constructor"><i class="fa fa-check"></i><b>13.3.1</b> Constructors</a></li>
<li class="chapter" data-level="13.3.2" data-path="s3.html"><a href="s3.html#validators"><i class="fa fa-check"></i><b>13.3.2</b> Validators</a></li>
<li class="chapter" data-level="13.3.3" data-path="s3.html"><a href="s3.html#helpers"><i class="fa fa-check"></i><b>13.3.3</b> Helpers</a></li>
<li class="chapter" data-level="13.3.4" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>13.3.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="s3.html"><a href="s3.html#s3-methods"><i class="fa fa-check"></i><b>13.4</b> Generics and methods</a><ul>
<li class="chapter" data-level="13.4.1" data-path="s3.html"><a href="s3.html#method-dispatch"><i class="fa fa-check"></i><b>13.4.1</b> Method dispatch</a></li>
<li class="chapter" data-level="13.4.2" data-path="s3.html"><a href="s3.html#finding-methods"><i class="fa fa-check"></i><b>13.4.2</b> Finding methods</a></li>
<li class="chapter" data-level="13.4.3" data-path="s3.html"><a href="s3.html#s3-arguments"><i class="fa fa-check"></i><b>13.4.3</b> Creating methods</a></li>
<li class="chapter" data-level="13.4.4" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>13.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="s3.html"><a href="s3.html#object-styles"><i class="fa fa-check"></i><b>13.5</b> Object styles</a><ul>
<li class="chapter" data-level="13.5.1" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>13.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="s3.html"><a href="s3.html#s3-inheritance"><i class="fa fa-check"></i><b>13.6</b> Inheritance</a><ul>
<li class="chapter" data-level="13.6.1" data-path="s3.html"><a href="s3.html#nextmethod"><i class="fa fa-check"></i><b>13.6.1</b> <code>NextMethod()</code></a></li>
<li class="chapter" data-level="13.6.2" data-path="s3.html"><a href="s3.html#s3-subclassing"><i class="fa fa-check"></i><b>13.6.2</b> Allowing subclassing</a></li>
<li class="chapter" data-level="13.6.3" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-4"><i class="fa fa-check"></i><b>13.6.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="s3.html"><a href="s3.html#s3-dispatch"><i class="fa fa-check"></i><b>13.7</b> Dispatch details</a><ul>
<li class="chapter" data-level="13.7.1" data-path="s3.html"><a href="s3.html#implicit-class"><i class="fa fa-check"></i><b>13.7.1</b> S3 and base types</a></li>
<li class="chapter" data-level="13.7.2" data-path="s3.html"><a href="s3.html#internal-generics"><i class="fa fa-check"></i><b>13.7.2</b> Internal generics</a></li>
<li class="chapter" data-level="13.7.3" data-path="s3.html"><a href="s3.html#group-generics"><i class="fa fa-check"></i><b>13.7.3</b> Group generics</a></li>
<li class="chapter" data-level="13.7.4" data-path="s3.html"><a href="s3.html#double-dispatch"><i class="fa fa-check"></i><b>13.7.4</b> Double dispatch</a></li>
<li class="chapter" data-level="13.7.5" data-path="functions.html"><a href="functions.html#exercises-5"><i class="fa fa-check"></i><b>13.7.5</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="r6.html"><a href="r6.html"><i class="fa fa-check"></i><b>14</b> R6</a><ul>
<li class="chapter" data-level="14.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>14.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="r6.html"><a href="r6.html#r6-classes"><i class="fa fa-check"></i><b>14.2</b> Classes and methods</a><ul>
<li class="chapter" data-level="14.2.1" data-path="r6.html"><a href="r6.html#method-chaining"><i class="fa fa-check"></i><b>14.2.1</b> Method chaining</a></li>
<li class="chapter" data-level="14.2.2" data-path="r6.html"><a href="r6.html#r6-important-methods"><i class="fa fa-check"></i><b>14.2.2</b> Important methods</a></li>
<li class="chapter" data-level="14.2.3" data-path="r6.html"><a href="r6.html#adding-methods-after-creation"><i class="fa fa-check"></i><b>14.2.3</b> Adding methods after creation</a></li>
<li class="chapter" data-level="14.2.4" data-path="r6.html"><a href="r6.html#inheritance"><i class="fa fa-check"></i><b>14.2.4</b> Inheritance</a></li>
<li class="chapter" data-level="14.2.5" data-path="r6.html"><a href="r6.html#introspection"><i class="fa fa-check"></i><b>14.2.5</b> Introspection</a></li>
<li class="chapter" data-level="14.2.6" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>14.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="r6.html"><a href="r6.html#r6-access"><i class="fa fa-check"></i><b>14.3</b> Controlling access</a><ul>
<li class="chapter" data-level="14.3.1" data-path="r6.html"><a href="r6.html#privacy"><i class="fa fa-check"></i><b>14.3.1</b> Privacy</a></li>
<li class="chapter" data-level="14.3.2" data-path="r6.html"><a href="r6.html#active-fields"><i class="fa fa-check"></i><b>14.3.2</b> Active fields</a></li>
<li class="chapter" data-level="14.3.3" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>14.3.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="r6.html"><a href="r6.html#r6-semantics"><i class="fa fa-check"></i><b>14.4</b> Reference semantics</a><ul>
<li class="chapter" data-level="14.4.1" data-path="r6.html"><a href="r6.html#reasoning"><i class="fa fa-check"></i><b>14.4.1</b> Reasoning</a></li>
<li class="chapter" data-level="14.4.2" data-path="r6.html"><a href="r6.html#finalizer"><i class="fa fa-check"></i><b>14.4.2</b> Finalizer</a></li>
<li class="chapter" data-level="14.4.3" data-path="r6.html"><a href="r6.html#r6-fields"><i class="fa fa-check"></i><b>14.4.3</b> R6 fields</a></li>
<li class="chapter" data-level="14.4.4" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>14.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="r6.html"><a href="r6.html#why-r6"><i class="fa fa-check"></i><b>14.5</b> Why R6?</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="s4.html"><a href="s4.html"><i class="fa fa-check"></i><b>15</b> S4</a><ul>
<li class="chapter" data-level="15.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>15.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="s4.html"><a href="s4.html#learning-more"><i class="fa fa-check"></i>Learning more</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="s4.html"><a href="s4.html#s4-basics"><i class="fa fa-check"></i><b>15.2</b> Basics</a><ul>
<li class="chapter" data-level="15.2.1" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>15.2.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.3" data-path="s4.html"><a href="s4.html#s4-classes"><i class="fa fa-check"></i><b>15.3</b> Classes</a><ul>
<li class="chapter" data-level="15.3.1" data-path="r6.html"><a href="r6.html#inheritance"><i class="fa fa-check"></i><b>15.3.1</b> Inheritance</a></li>
<li class="chapter" data-level="15.3.2" data-path="r6.html"><a href="r6.html#introspection"><i class="fa fa-check"></i><b>15.3.2</b> Introspection</a></li>
<li class="chapter" data-level="15.3.3" data-path="s4.html"><a href="s4.html#redefinition"><i class="fa fa-check"></i><b>15.3.3</b> Redefinition</a></li>
<li class="chapter" data-level="15.3.4" data-path="s4.html"><a href="s4.html#helper"><i class="fa fa-check"></i><b>15.3.4</b> Helper</a></li>
<li class="chapter" data-level="15.3.5" data-path="s4.html"><a href="s4.html#validator"><i class="fa fa-check"></i><b>15.3.5</b> Validator</a></li>
<li class="chapter" data-level="15.3.6" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>15.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="s4.html"><a href="s4.html#s4-generics"><i class="fa fa-check"></i><b>15.4</b> Generics and methods</a><ul>
<li class="chapter" data-level="15.4.1" data-path="s4.html"><a href="s4.html#signature"><i class="fa fa-check"></i><b>15.4.1</b> Signature</a></li>
<li class="chapter" data-level="15.4.2" data-path="s4.html"><a href="s4.html#methods"><i class="fa fa-check"></i><b>15.4.2</b> Methods</a></li>
<li class="chapter" data-level="15.4.3" data-path="s4.html"><a href="s4.html#show-method"><i class="fa fa-check"></i><b>15.4.3</b> Show method</a></li>
<li class="chapter" data-level="15.4.4" data-path="s4.html"><a href="s4.html#accessors"><i class="fa fa-check"></i><b>15.4.4</b> Accessors</a></li>
<li class="chapter" data-level="15.4.5" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>15.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.5" data-path="s4.html"><a href="s4.html#s4-dispatch"><i class="fa fa-check"></i><b>15.5</b> Method dispatch</a><ul>
<li class="chapter" data-level="15.5.1" data-path="s4.html"><a href="s4.html#single-dispatch"><i class="fa fa-check"></i><b>15.5.1</b> Single dispatch</a></li>
<li class="chapter" data-level="15.5.2" data-path="s4.html"><a href="s4.html#multiple-inheritance"><i class="fa fa-check"></i><b>15.5.2</b> Multiple inheritance</a></li>
<li class="chapter" data-level="15.5.3" data-path="s4.html"><a href="s4.html#multiple-dispatch"><i class="fa fa-check"></i><b>15.5.3</b> Multiple dispatch</a></li>
<li class="chapter" data-level="15.5.4" data-path="s4.html"><a href="s4.html#multiple-dispatch-and-multiple-inheritance"><i class="fa fa-check"></i><b>15.5.4</b> Multiple dispatch and multiple inheritance</a></li>
<li class="chapter" data-level="15.5.5" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>15.5.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="s4.html"><a href="s4.html#s4-s3"><i class="fa fa-check"></i><b>15.6</b> S4 and S3</a><ul>
<li class="chapter" data-level="15.6.1" data-path="s4.html"><a href="s4.html#classes"><i class="fa fa-check"></i><b>15.6.1</b> Classes</a></li>
<li class="chapter" data-level="15.6.2" data-path="s4.html"><a href="s4.html#generics"><i class="fa fa-check"></i><b>15.6.2</b> Generics</a></li>
<li class="chapter" data-level="15.6.3" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-4"><i class="fa fa-check"></i><b>15.6.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="16" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html"><i class="fa fa-check"></i><b>16</b> Trade-offs</a><ul>
<li class="chapter" data-level="16.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>16.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#s3-s4"><i class="fa fa-check"></i><b>16.2</b> S4 versus S3</a></li>
<li class="chapter" data-level="16.3" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#s3-r6"><i class="fa fa-check"></i><b>16.3</b> R6 versus S3</a><ul>
<li class="chapter" data-level="16.3.1" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#namespacing"><i class="fa fa-check"></i><b>16.3.1</b> Namespacing</a></li>
<li class="chapter" data-level="16.3.2" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#threading-state"><i class="fa fa-check"></i><b>16.3.2</b> Threading state</a></li>
<li class="chapter" data-level="16.3.3" data-path="oo-tradeoffs.html"><a href="oo-tradeoffs.html#tradeoffs-pipe"><i class="fa fa-check"></i><b>16.3.3</b> Method chaining</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>IV Metaprogramming</b></span></li>
<li class="chapter" data-level="" data-path="metaprogramming.html"><a href="metaprogramming.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="17" data-path="meta-big-picture.html"><a href="meta-big-picture.html"><i class="fa fa-check"></i><b>17</b> Big picture</a><ul>
<li class="chapter" data-level="17.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>17.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="17.2" data-path="meta-big-picture.html"><a href="meta-big-picture.html#code-data"><i class="fa fa-check"></i><b>17.2</b> Code is data</a></li>
<li class="chapter" data-level="17.3" data-path="meta-big-picture.html"><a href="meta-big-picture.html#code-tree"><i class="fa fa-check"></i><b>17.3</b> Code is a tree</a></li>
<li class="chapter" data-level="17.4" data-path="meta-big-picture.html"><a href="meta-big-picture.html#coding-code"><i class="fa fa-check"></i><b>17.4</b> Code can generate code</a></li>
<li class="chapter" data-level="17.5" data-path="meta-big-picture.html"><a href="meta-big-picture.html#eval-intro"><i class="fa fa-check"></i><b>17.5</b> Evaluation runs code</a></li>
<li class="chapter" data-level="17.6" data-path="meta-big-picture.html"><a href="meta-big-picture.html#eval-funs"><i class="fa fa-check"></i><b>17.6</b> Customising evaluation with functions</a></li>
<li class="chapter" data-level="17.7" data-path="meta-big-picture.html"><a href="meta-big-picture.html#eval-data"><i class="fa fa-check"></i><b>17.7</b> Customising evaluation with data</a></li>
<li class="chapter" data-level="17.8" data-path="meta-big-picture.html"><a href="meta-big-picture.html#quosure-intro"><i class="fa fa-check"></i><b>17.8</b> Quosures</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="expressions.html"><a href="expressions.html"><i class="fa fa-check"></i><b>18</b> Expressions</a><ul>
<li class="chapter" data-level="18.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>18.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="18.2" data-path="expressions.html"><a href="expressions.html#ast"><i class="fa fa-check"></i><b>18.2</b> Abstract syntax trees</a><ul>
<li class="chapter" data-level="18.2.1" data-path="expressions.html"><a href="expressions.html#drawing"><i class="fa fa-check"></i><b>18.2.1</b> Drawing</a></li>
<li class="chapter" data-level="18.2.2" data-path="expressions.html"><a href="expressions.html#non-code-components"><i class="fa fa-check"></i><b>18.2.2</b> Non-code components</a></li>
<li class="chapter" data-level="18.2.3" data-path="expressions.html"><a href="expressions.html#infix-calls"><i class="fa fa-check"></i><b>18.2.3</b> Infix calls</a></li>
<li class="chapter" data-level="18.2.4" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>18.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.3" data-path="expressions.html"><a href="expressions.html#expression-details"><i class="fa fa-check"></i><b>18.3</b> Expressions</a><ul>
<li class="chapter" data-level="18.3.1" data-path="expressions.html"><a href="expressions.html#constants"><i class="fa fa-check"></i><b>18.3.1</b> Constants</a></li>
<li class="chapter" data-level="18.3.2" data-path="expressions.html"><a href="expressions.html#symbols"><i class="fa fa-check"></i><b>18.3.2</b> Symbols</a></li>
<li class="chapter" data-level="18.3.3" data-path="expressions.html"><a href="expressions.html#calls"><i class="fa fa-check"></i><b>18.3.3</b> Calls</a></li>
<li class="chapter" data-level="18.3.4" data-path="expressions.html"><a href="expressions.html#summary"><i class="fa fa-check"></i><b>18.3.4</b> Summary</a></li>
<li class="chapter" data-level="18.3.5" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>18.3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.4" data-path="expressions.html"><a href="expressions.html#grammar"><i class="fa fa-check"></i><b>18.4</b> Parsing and grammar</a><ul>
<li class="chapter" data-level="18.4.1" data-path="expressions.html"><a href="expressions.html#operator-precedence"><i class="fa fa-check"></i><b>18.4.1</b> Operator precedence</a></li>
<li class="chapter" data-level="18.4.2" data-path="expressions.html"><a href="expressions.html#associativity"><i class="fa fa-check"></i><b>18.4.2</b> Associativity</a></li>
<li class="chapter" data-level="18.4.3" data-path="expressions.html"><a href="expressions.html#parsing"><i class="fa fa-check"></i><b>18.4.3</b> Parsing and deparsing</a></li>
<li class="chapter" data-level="18.4.4" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>18.4.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.5" data-path="expressions.html"><a href="expressions.html#ast-funs"><i class="fa fa-check"></i><b>18.5</b> Walking AST with recursive functions</a><ul>
<li class="chapter" data-level="18.5.1" data-path="expressions.html"><a href="expressions.html#finding-f-and-t"><i class="fa fa-check"></i><b>18.5.1</b> Finding F and T</a></li>
<li class="chapter" data-level="18.5.2" data-path="expressions.html"><a href="expressions.html#finding-all-variables-created-by-assignment"><i class="fa fa-check"></i><b>18.5.2</b> Finding all variables created by assignment</a></li>
<li class="chapter" data-level="18.5.3" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>18.5.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="18.6" data-path="expressions.html"><a href="expressions.html#expression-special"><i class="fa fa-check"></i><b>18.6</b> Specialised data structures</a><ul>
<li class="chapter" data-level="18.6.1" data-path="expressions.html"><a href="expressions.html#pairlists"><i class="fa fa-check"></i><b>18.6.1</b> Pairlists</a></li>
<li class="chapter" data-level="18.6.2" data-path="expressions.html"><a href="expressions.html#empty-symbol"><i class="fa fa-check"></i><b>18.6.2</b> Missing arguments</a></li>
<li class="chapter" data-level="18.6.3" data-path="expressions.html"><a href="expressions.html#expression-vectors"><i class="fa fa-check"></i><b>18.6.3</b> Expression vectors</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="19" data-path="quasiquotation.html"><a href="quasiquotation.html"><i class="fa fa-check"></i><b>19</b> Quasiquotation</a><ul>
<li class="chapter" data-level="19.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>19.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="" data-path="quasiquotation.html"><a href="quasiquotation.html#related-work"><i class="fa fa-check"></i>Related work</a></li>
</ul></li>
<li class="chapter" data-level="19.2" data-path="quasiquotation.html"><a href="quasiquotation.html#quasi-motivation"><i class="fa fa-check"></i><b>19.2</b> Motivation</a><ul>
<li class="chapter" data-level="19.2.1" data-path="quasiquotation.html"><a href="quasiquotation.html#vocabulary"><i class="fa fa-check"></i><b>19.2.1</b> Vocabulary</a></li>
<li class="chapter" data-level="19.2.2" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>19.2.2</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.3" data-path="quasiquotation.html"><a href="quasiquotation.html#quoting"><i class="fa fa-check"></i><b>19.3</b> Quoting</a><ul>
<li class="chapter" data-level="19.3.1" data-path="quasiquotation.html"><a href="quasiquotation.html#capturing-expressions"><i class="fa fa-check"></i><b>19.3.1</b> Capturing expressions</a></li>
<li class="chapter" data-level="19.3.2" data-path="quasiquotation.html"><a href="quasiquotation.html#capturing-symbols"><i class="fa fa-check"></i><b>19.3.2</b> Capturing symbols</a></li>
<li class="chapter" data-level="19.3.3" data-path="quasiquotation.html"><a href="quasiquotation.html#with-base-r"><i class="fa fa-check"></i><b>19.3.3</b> With base R</a></li>
<li class="chapter" data-level="19.3.4" data-path="quasiquotation.html"><a href="quasiquotation.html#substitution"><i class="fa fa-check"></i><b>19.3.4</b> Substitution</a></li>
<li class="chapter" data-level="19.3.5" data-path="expressions.html"><a href="expressions.html#summary"><i class="fa fa-check"></i><b>19.3.5</b> Summary</a></li>
<li class="chapter" data-level="19.3.6" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>19.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.4" data-path="quasiquotation.html"><a href="quasiquotation.html#unquoting"><i class="fa fa-check"></i><b>19.4</b> Unquoting</a><ul>
<li class="chapter" data-level="19.4.1" data-path="quasiquotation.html"><a href="quasiquotation.html#unquoting-one-argument"><i class="fa fa-check"></i><b>19.4.1</b> Unquoting one argument</a></li>
<li class="chapter" data-level="19.4.2" data-path="quasiquotation.html"><a href="quasiquotation.html#unquoting-a-function"><i class="fa fa-check"></i><b>19.4.2</b> Unquoting a function</a></li>
<li class="chapter" data-level="19.4.3" data-path="quasiquotation.html"><a href="quasiquotation.html#unquote-missing"><i class="fa fa-check"></i><b>19.4.3</b> Unquoting a missing argument</a></li>
<li class="chapter" data-level="19.4.4" data-path="quasiquotation.html"><a href="quasiquotation.html#unquoting-in-special-forms"><i class="fa fa-check"></i><b>19.4.4</b> Unquoting in special forms</a></li>
<li class="chapter" data-level="19.4.5" data-path="quasiquotation.html"><a href="quasiquotation.html#unquoting-many-arguments"><i class="fa fa-check"></i><b>19.4.5</b> Unquoting many arguments</a></li>
<li class="chapter" data-level="19.4.6" data-path="quasiquotation.html"><a href="quasiquotation.html#the-polite-fiction-of"><i class="fa fa-check"></i><b>19.4.6</b> The polite fiction of <code>!!</code></a></li>
<li class="chapter" data-level="19.4.7" data-path="quasiquotation.html"><a href="quasiquotation.html#non-standard-ast"><i class="fa fa-check"></i><b>19.4.7</b> Non-standard ASTs</a></li>
<li class="chapter" data-level="19.4.8" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>19.4.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.5" data-path="quasiquotation.html"><a href="quasiquotation.html#base-nonquote"><i class="fa fa-check"></i><b>19.5</b> Non-quoting</a></li>
<li class="chapter" data-level="19.6" data-path="quasiquotation.html"><a href="quasiquotation.html#tidy-dots"><i class="fa fa-check"></i><b>19.6</b> <code>...</code> (dot-dot-dot)</a><ul>
<li class="chapter" data-level="19.6.1" data-path="quasiquotation.html"><a href="quasiquotation.html#examples"><i class="fa fa-check"></i><b>19.6.1</b> Examples</a></li>
<li class="chapter" data-level="19.6.2" data-path="quasiquotation.html"><a href="quasiquotation.html#exec"><i class="fa fa-check"></i><b>19.6.2</b> <code>exec()</code></a></li>
<li class="chapter" data-level="19.6.3" data-path="quasiquotation.html"><a href="quasiquotation.html#dots_list"><i class="fa fa-check"></i><b>19.6.3</b> <code>dots_list()</code></a></li>
<li class="chapter" data-level="19.6.4" data-path="quasiquotation.html"><a href="quasiquotation.html#do-call"><i class="fa fa-check"></i><b>19.6.4</b> With base R</a></li>
<li class="chapter" data-level="19.6.5" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>19.6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.7" data-path="quasiquotation.html"><a href="quasiquotation.html#expr-case-studies"><i class="fa fa-check"></i><b>19.7</b> Case studies</a><ul>
<li class="chapter" data-level="19.7.1" data-path="quasiquotation.html"><a href="quasiquotation.html#lobstrast"><i class="fa fa-check"></i><b>19.7.1</b> <code>lobstr::ast()</code></a></li>
<li class="chapter" data-level="19.7.2" data-path="quasiquotation.html"><a href="quasiquotation.html#map-reduce-to-generate-code"><i class="fa fa-check"></i><b>19.7.2</b> Map-reduce to generate code</a></li>
<li class="chapter" data-level="19.7.3" data-path="quasiquotation.html"><a href="quasiquotation.html#slicing-an-array"><i class="fa fa-check"></i><b>19.7.3</b> Slicing an array</a></li>
<li class="chapter" data-level="19.7.4" data-path="quasiquotation.html"><a href="quasiquotation.html#new-function"><i class="fa fa-check"></i><b>19.7.4</b> Creating functions</a></li>
<li class="chapter" data-level="19.7.5" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-4"><i class="fa fa-check"></i><b>19.7.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="19.8" data-path="quasiquotation.html"><a href="quasiquotation.html#history"><i class="fa fa-check"></i><b>19.8</b> History</a></li>
</ul></li>
<li class="chapter" data-level="20" data-path="evaluation.html"><a href="evaluation.html"><i class="fa fa-check"></i><b>20</b> Evaluation</a><ul>
<li class="chapter" data-level="20.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>20.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="20.2" data-path="evaluation.html"><a href="evaluation.html#eval"><i class="fa fa-check"></i><b>20.2</b> Evaluation basics</a><ul>
<li class="chapter" data-level="20.2.1" data-path="evaluation.html"><a href="evaluation.html#application-local"><i class="fa fa-check"></i><b>20.2.1</b> Application: <code>local()</code></a></li>
<li class="chapter" data-level="20.2.2" data-path="evaluation.html"><a href="evaluation.html#application-source"><i class="fa fa-check"></i><b>20.2.2</b> Application: <code>source()</code></a></li>
<li class="chapter" data-level="20.2.3" data-path="evaluation.html"><a href="evaluation.html#gotcha-function"><i class="fa fa-check"></i><b>20.2.3</b> Gotcha: <code>function()</code></a></li>
<li class="chapter" data-level="20.2.4" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>20.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.3" data-path="evaluation.html"><a href="evaluation.html#quosures"><i class="fa fa-check"></i><b>20.3</b> Quosures</a><ul>
<li class="chapter" data-level="20.3.1" data-path="evaluation.html"><a href="evaluation.html#creating"><i class="fa fa-check"></i><b>20.3.1</b> Creating</a></li>
<li class="chapter" data-level="20.3.2" data-path="evaluation.html"><a href="evaluation.html#evaluating"><i class="fa fa-check"></i><b>20.3.2</b> Evaluating</a></li>
<li class="chapter" data-level="20.3.3" data-path="evaluation.html"><a href="evaluation.html#quosure-dots"><i class="fa fa-check"></i><b>20.3.3</b> Dots</a></li>
<li class="chapter" data-level="20.3.4" data-path="evaluation.html"><a href="evaluation.html#quosure-impl"><i class="fa fa-check"></i><b>20.3.4</b> Under the hood</a></li>
<li class="chapter" data-level="20.3.5" data-path="evaluation.html"><a href="evaluation.html#nested-quosures"><i class="fa fa-check"></i><b>20.3.5</b> Nested quosures</a></li>
<li class="chapter" data-level="20.3.6" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>20.3.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.4" data-path="evaluation.html"><a href="evaluation.html#data-masks"><i class="fa fa-check"></i><b>20.4</b> Data masks</a><ul>
<li class="chapter" data-level="20.4.1" data-path="environments.html"><a href="environments.html#basics"><i class="fa fa-check"></i><b>20.4.1</b> Basics</a></li>
<li class="chapter" data-level="20.4.2" data-path="evaluation.html"><a href="evaluation.html#pronouns"><i class="fa fa-check"></i><b>20.4.2</b> Pronouns</a></li>
<li class="chapter" data-level="20.4.3" data-path="evaluation.html"><a href="evaluation.html#subset"><i class="fa fa-check"></i><b>20.4.3</b> Application: <code>subset()</code></a></li>
<li class="chapter" data-level="20.4.4" data-path="evaluation.html"><a href="evaluation.html#application-transform"><i class="fa fa-check"></i><b>20.4.4</b> Application: transform</a></li>
<li class="chapter" data-level="20.4.5" data-path="evaluation.html"><a href="evaluation.html#select"><i class="fa fa-check"></i><b>20.4.5</b> Application: <code>select()</code></a></li>
<li class="chapter" data-level="20.4.6" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>20.4.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.5" data-path="evaluation.html"><a href="evaluation.html#tidy-evaluation"><i class="fa fa-check"></i><b>20.5</b> Using tidy evaluation</a><ul>
<li class="chapter" data-level="20.5.1" data-path="evaluation.html"><a href="evaluation.html#quoting-and-unquoting"><i class="fa fa-check"></i><b>20.5.1</b> Quoting and unquoting</a></li>
<li class="chapter" data-level="20.5.2" data-path="evaluation.html"><a href="evaluation.html#handling-ambiguity"><i class="fa fa-check"></i><b>20.5.2</b> Handling ambiguity</a></li>
<li class="chapter" data-level="20.5.3" data-path="evaluation.html"><a href="evaluation.html#quoting-and-ambiguity"><i class="fa fa-check"></i><b>20.5.3</b> Quoting and ambiguity</a></li>
<li class="chapter" data-level="20.5.4" data-path="names-values.html"><a href="names-values.html#exercises-3"><i class="fa fa-check"></i><b>20.5.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="20.6" data-path="evaluation.html"><a href="evaluation.html#base-evaluation"><i class="fa fa-check"></i><b>20.6</b> Base evaluation</a><ul>
<li class="chapter" data-level="20.6.1" data-path="evaluation.html"><a href="evaluation.html#substitute"><i class="fa fa-check"></i><b>20.6.1</b> <code>substitute()</code></a></li>
<li class="chapter" data-level="20.6.2" data-path="evaluation.html"><a href="evaluation.html#match.call"><i class="fa fa-check"></i><b>20.6.2</b> <code>match.call()</code></a></li>
<li class="chapter" data-level="20.6.3" data-path="vectors-chap.html"><a href="vectors-chap.html#exercises-4"><i class="fa fa-check"></i><b>20.6.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="21" data-path="translation.html"><a href="translation.html"><i class="fa fa-check"></i><b>21</b> Translating R code</a><ul>
<li class="chapter" data-level="21.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>21.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="21.2" data-path="translation.html"><a href="translation.html#html"><i class="fa fa-check"></i><b>21.2</b> HTML</a><ul>
<li class="chapter" data-level="21.2.1" data-path="translation.html"><a href="translation.html#goal"><i class="fa fa-check"></i><b>21.2.1</b> Goal</a></li>
<li class="chapter" data-level="21.2.2" data-path="translation.html"><a href="translation.html#escaping"><i class="fa fa-check"></i><b>21.2.2</b> Escaping</a></li>
<li class="chapter" data-level="21.2.3" data-path="translation.html"><a href="translation.html#basic-tag-functions"><i class="fa fa-check"></i><b>21.2.3</b> Basic tag functions</a></li>
<li class="chapter" data-level="21.2.4" data-path="translation.html"><a href="translation.html#tag-functions"><i class="fa fa-check"></i><b>21.2.4</b> Tag functions</a></li>
<li class="chapter" data-level="21.2.5" data-path="translation.html"><a href="translation.html#html-env"><i class="fa fa-check"></i><b>21.2.5</b> Processing all tags</a></li>
<li class="chapter" data-level="21.2.6" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>21.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="21.3" data-path="translation.html"><a href="translation.html#latex"><i class="fa fa-check"></i><b>21.3</b> LaTeX</a><ul>
<li class="chapter" data-level="21.3.1" data-path="translation.html"><a href="translation.html#latex-mathematics"><i class="fa fa-check"></i><b>21.3.1</b> LaTeX mathematics</a></li>
<li class="chapter" data-level="21.3.2" data-path="translation.html"><a href="translation.html#goal-1"><i class="fa fa-check"></i><b>21.3.2</b> Goal</a></li>
<li class="chapter" data-level="21.3.3" data-path="translation.html"><a href="translation.html#to_math"><i class="fa fa-check"></i><b>21.3.3</b> <code>to_math</code>()</a></li>
<li class="chapter" data-level="21.3.4" data-path="translation.html"><a href="translation.html#known-symbols"><i class="fa fa-check"></i><b>21.3.4</b> Known symbols</a></li>
<li class="chapter" data-level="21.3.5" data-path="translation.html"><a href="translation.html#unknown-symbols"><i class="fa fa-check"></i><b>21.3.5</b> Unknown symbols</a></li>
<li class="chapter" data-level="21.3.6" data-path="translation.html"><a href="translation.html#known-functions"><i class="fa fa-check"></i><b>21.3.6</b> Known functions</a></li>
<li class="chapter" data-level="21.3.7" data-path="translation.html"><a href="translation.html#unknown-functions"><i class="fa fa-check"></i><b>21.3.7</b> Unknown functions</a></li>
<li class="chapter" data-level="21.3.8" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>21.3.8</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>V Techniques</b></span></li>
<li class="chapter" data-level="" data-path="techniques.html"><a href="techniques.html"><i class="fa fa-check"></i>Introduction</a></li>
<li class="chapter" data-level="22" data-path="debugging.html"><a href="debugging.html"><i class="fa fa-check"></i><b>22</b> Debugging</a><ul>
<li class="chapter" data-level="22.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>22.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
</ul></li>
<li class="chapter" data-level="22.2" data-path="debugging.html"><a href="debugging.html#debugging-strategy"><i class="fa fa-check"></i><b>22.2</b> Overall approach</a></li>
<li class="chapter" data-level="22.3" data-path="debugging.html"><a href="debugging.html#traceback"><i class="fa fa-check"></i><b>22.3</b> Locating errors</a><ul>
<li class="chapter" data-level="22.3.1" data-path="debugging.html"><a href="debugging.html#debug-lazy"><i class="fa fa-check"></i><b>22.3.1</b> Lazy evaluation</a></li>
</ul></li>
<li class="chapter" data-level="22.4" data-path="debugging.html"><a href="debugging.html#browser"><i class="fa fa-check"></i><b>22.4</b> Interactive debugger</a><ul>
<li class="chapter" data-level="22.4.1" data-path="debugging.html"><a href="debugging.html#browser-commands"><i class="fa fa-check"></i><b>22.4.1</b> <code>browser()</code> commands</a></li>
<li class="chapter" data-level="22.4.2" data-path="debugging.html"><a href="debugging.html#alternatives"><i class="fa fa-check"></i><b>22.4.2</b> Alternatives</a></li>
<li class="chapter" data-level="22.4.3" data-path="debugging.html"><a href="debugging.html#debug-compiled"><i class="fa fa-check"></i><b>22.4.3</b> Compiled code</a></li>
</ul></li>
<li class="chapter" data-level="22.5" data-path="debugging.html"><a href="debugging.html#non-interactive-debugging"><i class="fa fa-check"></i><b>22.5</b> Non-interactive debugging</a><ul>
<li class="chapter" data-level="22.5.1" data-path="debugging.html"><a href="debugging.html#dump.frames"><i class="fa fa-check"></i><b>22.5.1</b> <code>dump.frames()</code></a></li>
<li class="chapter" data-level="22.5.2" data-path="debugging.html"><a href="debugging.html#print-debugging"><i class="fa fa-check"></i><b>22.5.2</b> Print debugging</a></li>
<li class="chapter" data-level="22.5.3" data-path="debugging.html"><a href="debugging.html#rmarkdown"><i class="fa fa-check"></i><b>22.5.3</b> RMarkdown</a></li>
</ul></li>
<li class="chapter" data-level="22.6" data-path="debugging.html"><a href="debugging.html#non-error-failures"><i class="fa fa-check"></i><b>22.6</b> Non-error failures</a></li>
</ul></li>
<li class="chapter" data-level="23" data-path="perf-measure.html"><a href="perf-measure.html"><i class="fa fa-check"></i><b>23</b> Measuring performance</a><ul>
<li class="chapter" data-level="23.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>23.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="23.2" data-path="perf-measure.html"><a href="perf-measure.html#profiling"><i class="fa fa-check"></i><b>23.2</b> Profiling</a><ul>
<li class="chapter" data-level="23.2.1" data-path="perf-measure.html"><a href="perf-measure.html#visualising-profiles"><i class="fa fa-check"></i><b>23.2.1</b> Visualising profiles</a></li>
<li class="chapter" data-level="23.2.2" data-path="perf-measure.html"><a href="perf-measure.html#memory-profiling"><i class="fa fa-check"></i><b>23.2.2</b> Memory profiling</a></li>
<li class="chapter" data-level="23.2.3" data-path="perf-measure.html"><a href="perf-measure.html#limitations"><i class="fa fa-check"></i><b>23.2.3</b> Limitations</a></li>
<li class="chapter" data-level="23.2.4" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>23.2.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="23.3" data-path="perf-measure.html"><a href="perf-measure.html#microbenchmarking"><i class="fa fa-check"></i><b>23.3</b> Microbenchmarking</a><ul>
<li class="chapter" data-level="23.3.1" data-path="perf-measure.html"><a href="perf-measure.html#benchmark-results"><i class="fa fa-check"></i><b>23.3.1</b> <code>bench::mark()</code> results</a></li>
<li class="chapter" data-level="23.3.2" data-path="perf-measure.html"><a href="perf-measure.html#interpreting-results"><i class="fa fa-check"></i><b>23.3.2</b> Interpreting results</a></li>
<li class="chapter" data-level="23.3.3" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>23.3.3</b> Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="24" data-path="perf-improve.html"><a href="perf-improve.html"><i class="fa fa-check"></i><b>24</b> Improving performance</a><ul>
<li class="chapter" data-level="24.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>24.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="24.2" data-path="perf-improve.html"><a href="perf-improve.html#code-organisation"><i class="fa fa-check"></i><b>24.2</b> Code organisation</a></li>
<li class="chapter" data-level="24.3" data-path="perf-improve.html"><a href="perf-improve.html#already-solved"><i class="fa fa-check"></i><b>24.3</b> Checking for existing solutions</a><ul>
<li class="chapter" data-level="24.3.1" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>24.3.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.4" data-path="perf-improve.html"><a href="perf-improve.html#be-lazy"><i class="fa fa-check"></i><b>24.4</b> Doing as little as possible</a><ul>
<li class="chapter" data-level="24.4.1" data-path="perf-improve.html"><a href="perf-improve.html#mean"><i class="fa fa-check"></i><b>24.4.1</b> <code>mean()</code></a></li>
<li class="chapter" data-level="24.4.2" data-path="perf-improve.html"><a href="perf-improve.html#as.data.frame"><i class="fa fa-check"></i><b>24.4.2</b> <code>as.data.frame()</code></a></li>
<li class="chapter" data-level="24.4.3" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>24.4.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.5" data-path="perf-improve.html"><a href="perf-improve.html#vectorise"><i class="fa fa-check"></i><b>24.5</b> Vectorise</a><ul>
<li class="chapter" data-level="24.5.1" data-path="names-values.html"><a href="names-values.html#exercises-2"><i class="fa fa-check"></i><b>24.5.1</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="24.6" data-path="perf-improve.html"><a href="perf-improve.html#avoid-copies"><i class="fa fa-check"></i><b>24.6</b> Avoiding copies</a></li>
<li class="chapter" data-level="24.7" data-path="perf-improve.html"><a href="perf-improve.html#t-test"><i class="fa fa-check"></i><b>24.7</b> Case study: t-test</a></li>
<li class="chapter" data-level="24.8" data-path="perf-improve.html"><a href="perf-improve.html#more-techniques"><i class="fa fa-check"></i><b>24.8</b> Other techniques</a></li>
</ul></li>
<li class="chapter" data-level="25" data-path="rcpp.html"><a href="rcpp.html"><i class="fa fa-check"></i><b>25</b> Rewriting R code in C++</a><ul>
<li class="chapter" data-level="25.1" data-path="introduction.html"><a href="introduction.html#introduction"><i class="fa fa-check"></i><b>25.1</b> Introduction</a><ul>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#outline"><i class="fa fa-check"></i>Outline</a></li>
<li class="chapter" data-level="" data-path="names-values.html"><a href="names-values.html#prerequisites"><i class="fa fa-check"></i>Prerequisites</a></li>
</ul></li>
<li class="chapter" data-level="25.2" data-path="rcpp.html"><a href="rcpp.html#rcpp-intro"><i class="fa fa-check"></i><b>25.2</b> Getting started with C++</a><ul>
<li class="chapter" data-level="25.2.1" data-path="rcpp.html"><a href="rcpp.html#no-inputs-scalar-output"><i class="fa fa-check"></i><b>25.2.1</b> No inputs, scalar output</a></li>
<li class="chapter" data-level="25.2.2" data-path="rcpp.html"><a href="rcpp.html#scalar-input-scalar-output"><i class="fa fa-check"></i><b>25.2.2</b> Scalar input, scalar output</a></li>
<li class="chapter" data-level="25.2.3" data-path="rcpp.html"><a href="rcpp.html#vector-input-scalar-output"><i class="fa fa-check"></i><b>25.2.3</b> Vector input, scalar output</a></li>
<li class="chapter" data-level="25.2.4" data-path="rcpp.html"><a href="rcpp.html#vector-input-vector-output"><i class="fa fa-check"></i><b>25.2.4</b> Vector input, vector output</a></li>
<li class="chapter" data-level="25.2.5" data-path="rcpp.html"><a href="rcpp.html#sourceCpp"><i class="fa fa-check"></i><b>25.2.5</b> Using sourceCpp</a></li>
<li class="chapter" data-level="25.2.6" data-path="rcpp.html"><a href="rcpp.html#exercise-started"><i class="fa fa-check"></i><b>25.2.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="25.3" data-path="rcpp.html"><a href="rcpp.html#rcpp-classes"><i class="fa fa-check"></i><b>25.3</b> Other classes</a><ul>
<li class="chapter" data-level="25.3.1" data-path="rcpp.html"><a href="rcpp.html#lists-and-data-frames"><i class="fa fa-check"></i><b>25.3.1</b> Lists and data frames</a></li>
<li class="chapter" data-level="25.3.2" data-path="rcpp.html"><a href="rcpp.html#functions-rcpp"><i class="fa fa-check"></i><b>25.3.2</b> Functions</a></li>
<li class="chapter" data-level="25.3.3" data-path="vectors-chap.html"><a href="vectors-chap.html#attributes"><i class="fa fa-check"></i><b>25.3.3</b> Attributes</a></li>
</ul></li>
<li class="chapter" data-level="25.4" data-path="rcpp.html"><a href="rcpp.html#rcpp-na"><i class="fa fa-check"></i><b>25.4</b> Missing values</a><ul>
<li class="chapter" data-level="25.4.1" data-path="vectors-chap.html"><a href="vectors-chap.html#scalars"><i class="fa fa-check"></i><b>25.4.1</b> Scalars</a></li>
<li class="chapter" data-level="25.4.2" data-path="rcpp.html"><a href="rcpp.html#strings"><i class="fa fa-check"></i><b>25.4.2</b> Strings</a></li>
<li class="chapter" data-level="25.4.3" data-path="rcpp.html"><a href="rcpp.html#boolean"><i class="fa fa-check"></i><b>25.4.3</b> Boolean</a></li>
<li class="chapter" data-level="25.4.4" data-path="rcpp.html"><a href="rcpp.html#vectors-rcpp"><i class="fa fa-check"></i><b>25.4.4</b> Vectors</a></li>
<li class="chapter" data-level="25.4.5" data-path="names-values.html"><a href="names-values.html#exercises"><i class="fa fa-check"></i><b>25.4.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="25.5" data-path="rcpp.html"><a href="rcpp.html#stl"><i class="fa fa-check"></i><b>25.5</b> Standard Template Library</a><ul>
<li class="chapter" data-level="25.5.1" data-path="rcpp.html"><a href="rcpp.html#using-iterators"><i class="fa fa-check"></i><b>25.5.1</b> Using iterators</a></li>
<li class="chapter" data-level="25.5.2" data-path="rcpp.html"><a href="rcpp.html#algorithms"><i class="fa fa-check"></i><b>25.5.2</b> Algorithms</a></li>
<li class="chapter" data-level="25.5.3" data-path="rcpp.html"><a href="rcpp.html#data-structures-rcpp"><i class="fa fa-check"></i><b>25.5.3</b> Data structures</a></li>
<li class="chapter" data-level="25.5.4" data-path="rcpp.html"><a href="rcpp.html#vectors-stl"><i class="fa fa-check"></i><b>25.5.4</b> Vectors</a></li>
<li class="chapter" data-level="25.5.5" data-path="rcpp.html"><a href="rcpp.html#sets"><i class="fa fa-check"></i><b>25.5.5</b> Sets</a></li>
<li class="chapter" data-level="25.5.6" data-path="functionals.html"><a href="functionals.html#map"><i class="fa fa-check"></i><b>25.5.6</b> Map</a></li>
<li class="chapter" data-level="25.5.7" data-path="names-values.html"><a href="names-values.html#exercises-1"><i class="fa fa-check"></i><b>25.5.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="25.6" data-path="rcpp.html"><a href="rcpp.html#rcpp-case-studies"><i class="fa fa-check"></i><b>25.6</b> Case studies</a><ul>
<li class="chapter" data-level="25.6.1" data-path="rcpp.html"><a href="rcpp.html#gibbs-sampler"><i class="fa fa-check"></i><b>25.6.1</b> Gibbs sampler</a></li>
<li class="chapter" data-level="25.6.2" data-path="rcpp.html"><a href="rcpp.html#r-vectorisation-versus-c-vectorisation"><i class="fa fa-check"></i><b>25.6.2</b> R vectorisation versus C++ vectorisation</a></li>
</ul></li>
<li class="chapter" data-level="25.7" data-path="rcpp.html"><a href="rcpp.html#rcpp-package"><i class="fa fa-check"></i><b>25.7</b> Using Rcpp in a package</a></li>
<li class="chapter" data-level="25.8" data-path="rcpp.html"><a href="rcpp.html#rcpp-more"><i class="fa fa-check"></i><b>25.8</b> Learning more</a></li>
<li class="chapter" data-level="25.9" data-path="rcpp.html"><a href="rcpp.html#acknowledgments"><i class="fa fa-check"></i><b>25.9</b> Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Advanced R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="functions" class="section level1">
<h1><span class="header-section-number">6</span> Functions</h1>
<div id="introduction" class="section level2">
<h2><span class="header-section-number">6.1</span> Introduction</h2>
<p>
</p>
<p>If you’re reading this book, you’ve probably already created many R functions and know how to use them to reduce duplication in your code. In this chapter, you’ll learn how to turn that informal, working knowledge into more rigorous, theoretical understanding. And while you’ll see some interesting tricks and techniques along the way, keep in mind that what you’ll learn here will be important for understanding the more advanced topics discussed later in the book.</p>
<div id="quiz" class="section level3 unnumbered">
<h3>Quiz</h3>
<p>Answer the following questions to see if you can safely skip this chapter. You can find the answers in Section <a href="functions.html#function-answers">6.9</a>.</p>
<ol style="list-style-type: decimal">
<li><p>What are the three components of a function?</p></li>
<li><p>What does the following code return?</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb187-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb187-2" data-line-number="2">f1 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb187-3" data-line-number="3">  <span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb187-4" data-line-number="4">    x <span class="op">+</span><span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb187-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb187-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb187-7" data-line-number="7"><span class="kw">f1</span>(<span class="dv">1</span>)()</a></code></pre></div></li>
<li><p>How would you usually write this code?</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb188-1" data-line-number="1"><span class="st">`</span><span class="dt">+</span><span class="st">`</span>(<span class="dv">1</span>, <span class="st">`</span><span class="dt">*</span><span class="st">`</span>(<span class="dv">2</span>, <span class="dv">3</span>))</a></code></pre></div></li>
<li><p>How could you make this call easier to read?</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb189-1" data-line-number="1"><span class="kw">mean</span>(, <span class="ot">TRUE</span>, <span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="ot">NA</span>))</a></code></pre></div></li>
<li><p>Does the following code throw an error when executed? Why or why not?</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb190-1" data-line-number="1">f2 &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) {</a>
<a class="sourceLine" id="cb190-2" data-line-number="2">  a <span class="op">*</span><span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb190-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb190-4" data-line-number="4"><span class="kw">f2</span>(<span class="dv">10</span>, <span class="kw">stop</span>(<span class="st">&quot;This is an error!&quot;</span>))</a></code></pre></div></li>
<li><p>What is an infix function? How do you write it? What’s a replacement
function? How do you write it?</p></li>
<li><p>How do you ensure that cleanup action occurs regardless of how a function
exits?</p></li>
</ol>
</div>
<div id="outline" class="section level3 unnumbered">
<h3>Outline</h3>
<ul>
<li><p>Section <a href="functions.html#function-fundamentals">6.2</a> describes the basics of creating a
function, the three main components of a function, and the exception
to many function rules: primitive functions (which are implemented in C, not
R).</p></li>
<li><p>Section <a href="functions.html#function-composition">6.3</a> discusses the strengths and weaknesses
of the three forms of function composition commonly used in R code.</p></li>
<li><p>Section <a href="functions.html#lexical-scoping">6.4</a> shows you how R finds the value associated
with a given name, i.e. the rules of lexical scoping.</p></li>
<li><p>Section <a href="functions.html#lazy-evaluation">6.5</a> is devoted to an important property of
function arguments: they are only evaluated when used for the first time.</p></li>
<li><p>Section <a href="functions.html#fun-dot-dot-dot">6.6</a> discusses the special <code>...</code> argument, which
allows you to pass on extra arguments to another function.</p></li>
<li><p>Section <a href="functions.html#exiting-a-function">6.7</a> discusses the two primary ways that a
function can exit, and how to define an exit handler, code that is run on
exit, regardless of what triggers it.</p></li>
<li><p>Section <a href="functions.html#function-forms">6.8</a> shows you the various ways in which R
disguises ordinary function calls, and how you can use the standard prefix
form to better understand what’s going on.</p></li>
</ul>
</div>
</div>
<div id="function-fundamentals" class="section level2">
<h2><span class="header-section-number">6.2</span> Function fundamentals</h2>
<p>To understand functions in R you need to internalise two important ideas:</p>
<ul>
<li>Functions can be broken down into three components: arguments, body, and environment.</li>
</ul>
<p>There are exceptions to every rule, and in this case, there is a small selection of “primitive” base functions that are implemented purely in C.</p>
<ul>
<li>Functions are objects, just as vectors are objects.</li>
</ul>
<div id="fun-components" class="section level3">
<h3><span class="header-section-number">6.2.1</span> Function components</h3>
<p>






</p>
<p>A function has three parts:</p>
<ul>
<li><p>The <code>formals()</code>, the list of arguments that control how you call the function.</p></li>
<li><p>The <code>body()</code>, the code inside the function.</p></li>
<li><p>The <code>environment()</code>, the data structure that determines how the function finds
the values associated with the names.</p></li>
</ul>
<p>While the formals and body are specified explicitly when you create a function, the environment is specified implicitly, based on <em>where</em> you defined the function. The function environment always exists, but it is only printed when the function isn’t defined in the global environment.</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb191-1" data-line-number="1">f02 &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) {</a>
<a class="sourceLine" id="cb191-2" data-line-number="2">  <span class="co"># A comment</span></a>
<a class="sourceLine" id="cb191-3" data-line-number="3">  x <span class="op">+</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb191-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb191-5" data-line-number="5"></a>
<a class="sourceLine" id="cb191-6" data-line-number="6"><span class="kw">formals</span>(f02)</a>
<a class="sourceLine" id="cb191-7" data-line-number="7"><span class="co">#&gt; $x</span></a>
<a class="sourceLine" id="cb191-8" data-line-number="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb191-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb191-10" data-line-number="10"><span class="co">#&gt; $y</span></a>
<a class="sourceLine" id="cb191-11" data-line-number="11"></a>
<a class="sourceLine" id="cb191-12" data-line-number="12"><span class="kw">body</span>(f02)</a>
<a class="sourceLine" id="cb191-13" data-line-number="13"><span class="co">#&gt; {</span></a>
<a class="sourceLine" id="cb191-14" data-line-number="14"><span class="co">#&gt;     x + y</span></a>
<a class="sourceLine" id="cb191-15" data-line-number="15"><span class="co">#&gt; }</span></a>
<a class="sourceLine" id="cb191-16" data-line-number="16"></a>
<a class="sourceLine" id="cb191-17" data-line-number="17"><span class="kw">environment</span>(f02)</a>
<a class="sourceLine" id="cb191-18" data-line-number="18"><span class="co">#&gt; &lt;environment: R_GlobalEnv&gt;</span></a></code></pre></div>
<p>I’ll draw functions as in the following diagram. The black dot on the left is the environment. The two blocks to the right are the function arguments. I won’t draw the body, because it’s usually large, and doesn’t help you understand the shape of the function.</p>
<p><img src="diagrams/functions/components.png" style="display: block; margin: auto;" /></p>
<p>Like all objects in R, functions can also possess any number of additional <code>attributes()</code>. One attribute used by base R is <code>srcref</code>, short for source reference. It points to the source code used to create the function. The <code>srcref</code> is used for printing because, unlike <code>body()</code>, it contains code comments and other formatting.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb192-1" data-line-number="1"><span class="kw">attr</span>(f02, <span class="st">&quot;srcref&quot;</span>)</a>
<a class="sourceLine" id="cb192-2" data-line-number="2"><span class="co">#&gt; function(x, y) {</span></a>
<a class="sourceLine" id="cb192-3" data-line-number="3"><span class="co">#&gt;   # A comment</span></a>
<a class="sourceLine" id="cb192-4" data-line-number="4"><span class="co">#&gt;   x + y</span></a>
<a class="sourceLine" id="cb192-5" data-line-number="5"><span class="co">#&gt; }</span></a></code></pre></div>
</div>
<div id="primitive-functions" class="section level3">
<h3><span class="header-section-number">6.2.2</span> Primitive functions</h3>
<p>

</p>
<p>There is one exception to the rule that a function has three components. Primitive functions, like <code>sum()</code> and <code>[</code>, call C code directly.</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb193-1" data-line-number="1">sum</a>
<a class="sourceLine" id="cb193-2" data-line-number="2"><span class="co">#&gt; function (..., na.rm = FALSE)  .Primitive(&quot;sum&quot;)</span></a>
<a class="sourceLine" id="cb193-3" data-line-number="3"><span class="st">`</span><span class="dt">[</span><span class="st">`</span></a>
<a class="sourceLine" id="cb193-4" data-line-number="4"><span class="co">#&gt; .Primitive(&quot;[&quot;)</span></a></code></pre></div>
<p>They have either type <code>builtin</code> or type <code>special</code>.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb194-1" data-line-number="1"><span class="kw">typeof</span>(sum)</a>
<a class="sourceLine" id="cb194-2" data-line-number="2"><span class="co">#&gt; [1] &quot;builtin&quot;</span></a>
<a class="sourceLine" id="cb194-3" data-line-number="3"><span class="kw">typeof</span>(<span class="st">`</span><span class="dt">[</span><span class="st">`</span>)</a>
<a class="sourceLine" id="cb194-4" data-line-number="4"><span class="co">#&gt; [1] &quot;special&quot;</span></a></code></pre></div>
<p>These functions exist primarily in C, not R, so their <code>formals()</code>, <code>body()</code>, and <code>environment()</code> are all <code>NULL</code>:</p>
<div class="sourceCode" id="cb195"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb195-1" data-line-number="1"><span class="kw">formals</span>(sum)</a>
<a class="sourceLine" id="cb195-2" data-line-number="2"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb195-3" data-line-number="3"><span class="kw">body</span>(sum)</a>
<a class="sourceLine" id="cb195-4" data-line-number="4"><span class="co">#&gt; NULL</span></a>
<a class="sourceLine" id="cb195-5" data-line-number="5"><span class="kw">environment</span>(sum)</a>
<a class="sourceLine" id="cb195-6" data-line-number="6"><span class="co">#&gt; NULL</span></a></code></pre></div>
<p>Primitive functions are only found in the base package. While they have certain performance advantages, this benefit comes at a price: they are harder to write. For this reason, R-core generally avoids creating them unless there is no other option.</p>
<!-- HW: mention internal functions here too? Cross-reference to perf example -->
</div>
<div id="first-class-functions" class="section level3">
<h3><span class="header-section-number">6.2.3</span> First-class functions</h3>
<p>
</p>
<p>It’s very important to understand that R functions are objects in their own right, a language property often called “first-class functions”. Unlike in many other languages, there is no special syntax for defining and naming a function: you simply create a function object (with <code>function</code>) and bind it to a name with <code>&lt;-</code>:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb196-1" data-line-number="1">f01 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb196-2" data-line-number="2">  <span class="kw">sin</span>(<span class="dv">1</span> <span class="op">/</span><span class="st"> </span>x <span class="op">^</span><span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb196-3" data-line-number="3">}</a></code></pre></div>
<p><img src="diagrams/functions/first-class.png" style="display: block; margin: auto;" /></p>
<p>While you almost always create a function and then bind it to a name, the binding step is not compulsory. If you choose not to give a function a name, you get an <strong>anonymous function</strong>. This is useful when it’s not worth the effort to figure out a name:</p>
<div class="sourceCode" id="cb197"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb197-1" data-line-number="1"><span class="kw">lapply</span>(mtcars, <span class="cf">function</span>(x) <span class="kw">length</span>(<span class="kw">unique</span>(x)))</a>
<a class="sourceLine" id="cb197-2" data-line-number="2"><span class="kw">Filter</span>(<span class="cf">function</span>(x) <span class="op">!</span><span class="kw">is.numeric</span>(x), mtcars)</a>
<a class="sourceLine" id="cb197-3" data-line-number="3"><span class="kw">integrate</span>(<span class="cf">function</span>(x) <span class="kw">sin</span>(x) <span class="op">^</span><span class="st"> </span><span class="dv">2</span>, <span class="dv">0</span>, pi)</a></code></pre></div>
<p>A final option is to put functions in a list:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb198-1" data-line-number="1">funs &lt;-<span class="st"> </span><span class="kw">list</span>(</a>
<a class="sourceLine" id="cb198-2" data-line-number="2">  <span class="dt">half =</span> <span class="cf">function</span>(x) x <span class="op">/</span><span class="st"> </span><span class="dv">2</span>,</a>
<a class="sourceLine" id="cb198-3" data-line-number="3">  <span class="dt">double =</span> <span class="cf">function</span>(x) x <span class="op">*</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb198-4" data-line-number="4">)</a>
<a class="sourceLine" id="cb198-5" data-line-number="5"></a>
<a class="sourceLine" id="cb198-6" data-line-number="6">funs<span class="op">$</span><span class="kw">double</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb198-7" data-line-number="7"><span class="co">#&gt; [1] 20</span></a></code></pre></div>
<p>In R, you’ll often see functions called <strong>closures</strong>. This name reflects the fact that R functions capture, or enclose, their environments, which you’ll learn more about in Section <a href="environments.html#function-environments">7.4.2</a>.</p>
</div>
<div id="invoking-a-function" class="section level3">
<h3><span class="header-section-number">6.2.4</span> Invoking a function</h3>

<p>You normally call a function by placing its arguments, wrapped in parentheses, after its name: <code>mean(1:10, na.rm = TRUE)</code>. But what happens if you have the arguments already in a data structure?</p>
<div class="sourceCode" id="cb199"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb199-1" data-line-number="1">args &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>You can instead use <code>do.call()</code>: it has two arguments. The function to call, and a list containing the function arguments:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb200-1" data-line-number="1"><span class="kw">do.call</span>(mean, args)</a>
<a class="sourceLine" id="cb200-2" data-line-number="2"><span class="co">#&gt; [1] 5.5</span></a></code></pre></div>
<p>We’ll come back to this idea in Section <a href="quasiquotation.html#tidy-dots">19.6</a>.</p>
</div>
<div id="exercises" class="section level3">
<h3><span class="header-section-number">6.2.5</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Given a name, like <code>&quot;mean&quot;</code>, <code>match.fun()</code> lets you find a function.
Given a function, can you find its name? Why doesn’t that make sense in R?</p></li>
<li><p>It’s possible (although typically not useful) to call an anonymous function.
Which of the two approaches below is correct? Why?</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb201-1" data-line-number="1"><span class="cf">function</span>(x) <span class="dv">3</span>()</a>
<a class="sourceLine" id="cb201-2" data-line-number="2"><span class="co">#&gt; function(x) 3()</span></a>
<a class="sourceLine" id="cb201-3" data-line-number="3">(<span class="cf">function</span>(x) <span class="dv">3</span>)()</a>
<a class="sourceLine" id="cb201-4" data-line-number="4"><span class="co">#&gt; [1] 3</span></a></code></pre></div></li>
<li><p>A good rule of thumb is that an anonymous function should fit on one line
and shouldn’t need to use <code>{}</code>. Review your code. Where could you have
used an anonymous function instead of a named function? Where should you
have used a named function instead of an anonymous function?</p></li>
<li><p>What function allows you to tell if an object is a function? What function
allows you to tell if a function is a primitive function?</p></li>
<li><p>This code makes a list of all functions in the base package.</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb202-1" data-line-number="1">objs &lt;-<span class="st"> </span><span class="kw">mget</span>(<span class="kw">ls</span>(<span class="st">&quot;package:base&quot;</span>, <span class="dt">all =</span> <span class="ot">TRUE</span>), <span class="dt">inherits =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb202-2" data-line-number="2">funs &lt;-<span class="st"> </span><span class="kw">Filter</span>(is.function, objs)</a></code></pre></div>
<p>Use it to answer the following questions:</p>
<ol style="list-style-type: lower-alpha">
<li><p>Which base function has the most arguments?</p></li>
<li><p>How many base functions have no arguments? What’s special about those
functions?</p></li>
<li><p>How could you adapt the code to find all primitive functions?</p></li>
</ol></li>
<li><p>What are the three important components of a function?</p></li>
<li><p>When does printing a function not show the environment it was created in?</p></li>
</ol>
</div>
</div>
<div id="function-composition" class="section level2">
<h2><span class="header-section-number">6.3</span> Function composition</h2>
<p>


</p>
<p>Base R provides two ways to compose multiple function calls. For example, imagine you want to compute the population standard deviation using <code>sqrt()</code> and <code>mean()</code> as building blocks:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb203-1" data-line-number="1">square &lt;-<span class="st"> </span><span class="cf">function</span>(x) x<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb203-2" data-line-number="2">deviation &lt;-<span class="st"> </span><span class="cf">function</span>(x) x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)</a></code></pre></div>
<p>You either nest the function calls:</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb204-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dv">100</span>)</a>
<a class="sourceLine" id="cb204-2" data-line-number="2"></a>
<a class="sourceLine" id="cb204-3" data-line-number="3"><span class="kw">sqrt</span>(<span class="kw">mean</span>(<span class="kw">square</span>(<span class="kw">deviation</span>(x))))</a>
<a class="sourceLine" id="cb204-4" data-line-number="4"><span class="co">#&gt; [1] 0.274</span></a></code></pre></div>
<p>Or you save the intermediate results as variables:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb205-1" data-line-number="1">out &lt;-<span class="st"> </span><span class="kw">deviation</span>(x)</a>
<a class="sourceLine" id="cb205-2" data-line-number="2">out &lt;-<span class="st"> </span><span class="kw">square</span>(out)</a>
<a class="sourceLine" id="cb205-3" data-line-number="3">out &lt;-<span class="st"> </span><span class="kw">mean</span>(out)</a>
<a class="sourceLine" id="cb205-4" data-line-number="4">out &lt;-<span class="st"> </span><span class="kw">sqrt</span>(out)</a>
<a class="sourceLine" id="cb205-5" data-line-number="5">out</a>
<a class="sourceLine" id="cb205-6" data-line-number="6"><span class="co">#&gt; [1] 0.274</span></a></code></pre></div>
<p>The magrittr package <span class="citation">(Bache and Wickham <a href="#ref-magrittr">2014</a>)</span> provides a third option: the binary operator <code>%&gt;%</code>, which is called the pipe and is pronounced as “and then”.</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb206-1" data-line-number="1"><span class="kw">library</span>(magrittr)</a>
<a class="sourceLine" id="cb206-2" data-line-number="2"></a>
<a class="sourceLine" id="cb206-3" data-line-number="3">x <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb206-4" data-line-number="4"><span class="st">  </span><span class="kw">deviation</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb206-5" data-line-number="5"><span class="st">  </span><span class="kw">square</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb206-6" data-line-number="6"><span class="st">  </span><span class="kw">mean</span>() <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb206-7" data-line-number="7"><span class="st">  </span><span class="kw">sqrt</span>()</a>
<a class="sourceLine" id="cb206-8" data-line-number="8"><span class="co">#&gt; [1] 0.274</span></a></code></pre></div>
<p><code>x %&gt;% f()</code> is equivalent to <code>f(x)</code>; <code>x %&gt;% f(y)</code> is equivalent to <code>f(x, y)</code>. The pipe allows you to focus on the high-level composition of functions rather than the low-level flow of data; the focus is on what’s being done (the verbs), rather than on what’s being modified (the nouns). This style is common in Haskell and F#, the main inspiration for magrittr, and is the default style in stack based programming languages like Forth and Factor.</p>
<p>Each of the three options has its own strengths and weaknesses:</p>
<ul>
<li><p>Nesting, <code>f(g(x))</code>, is concise, and well suited for short sequences. But
longer sequences are hard to read because they are read inside out and
right to left. As a result, arguments can get spread out over long distances
creating the <a href="https://en.wikipedia.org/wiki/Dagwood_sandwich">Dagwood
sandwich</a> problem.</p></li>
<li><p>Intermediate objects, <code>y &lt;- f(x); g(y)</code>, requires you to name intermediate
objects. This is a strength when objects are important, but a weakness when
values are truly intermediate.</p></li>
<li><p>Piping, <code>x %&gt;% f() %&gt;% g()</code>, allows you to read code in straightforward
left-to-right fashion and doesn’t require you to name intermediate objects.
But you can only use it with linear sequences of transformations of a single
object. It also requires an additional third party package and assumes that
the reader understands piping.</p></li>
</ul>
<p>Most code will use a combination of all three styles. Piping is more common in data analysis code, as much of an analysis consists of a sequence of transformations of an object (like a data frame or plot). I tend to use piping infrequently in packages; not because it is a bad idea, but because it’s often a less natural fit.</p>
</div>
<div id="lexical-scoping" class="section level2">
<h2><span class="header-section-number">6.4</span> Lexical scoping</h2>
<p></p>
<p>In Chapter <a href="names-values.html#names-values">2</a>, we discussed assignment, the act of binding a name to a value. Here we’ll discuss <strong>scoping</strong>, the act of finding the value associated with a name.</p>
<p>The basic rules of scoping are quite intuitive, and you’ve probably already internalised them, even if you never explicitly studied them. For example, what will the following code return, 10 or 20?<a href="#fn25" class="footnote-ref" id="fnref25"><sup>25</sup></a></p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb207-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb207-2" data-line-number="2">g01 &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb207-3" data-line-number="3">  x &lt;-<span class="st"> </span><span class="dv">20</span></a>
<a class="sourceLine" id="cb207-4" data-line-number="4">  x</a>
<a class="sourceLine" id="cb207-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb207-6" data-line-number="6"></a>
<a class="sourceLine" id="cb207-7" data-line-number="7"><span class="kw">g01</span>()</a></code></pre></div>
<p>In this section, you’ll learn the formal rules of scoping as well as some of its more subtle details. A deeper understanding of scoping will help you to use more advanced functional programming tools, and eventually, even to write tools that translate R code into other languages.</p>
<p>R uses <strong>lexical scoping</strong><a href="#fn26" class="footnote-ref" id="fnref26"><sup>26</sup></a>: it looks up the values of names based on how a function is defined, not how it is called. “Lexical” here is not the English adjective that means relating to words or a vocabulary. It’s a technical CS term that tells us that the scoping rules use a parse-time, rather than a run-time structure.</p>
<p>R’s lexical scoping follows four primary rules:</p>
<ul>
<li>Name masking</li>
<li>Functions versus variables</li>
<li>A fresh start</li>
<li>Dynamic lookup</li>
</ul>
<div id="name-masking" class="section level3">
<h3><span class="header-section-number">6.4.1</span> Name masking</h3>
<p></p>
<p>The basic principle of lexical scoping is that names defined inside a function mask names defined outside a function. This is illustrated in the following example.</p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb208-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb208-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="dv">20</span></a>
<a class="sourceLine" id="cb208-3" data-line-number="3">g02 &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb208-4" data-line-number="4">  x &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb208-5" data-line-number="5">  y &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb208-6" data-line-number="6">  <span class="kw">c</span>(x, y)</a>
<a class="sourceLine" id="cb208-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb208-8" data-line-number="8"><span class="kw">g02</span>()</a>
<a class="sourceLine" id="cb208-9" data-line-number="9"><span class="co">#&gt; [1] 1 2</span></a></code></pre></div>
<p>If a name isn’t defined inside a function, R looks one level up.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb209-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb209-2" data-line-number="2">g03 &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb209-3" data-line-number="3">  y &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb209-4" data-line-number="4">  <span class="kw">c</span>(x, y)</a>
<a class="sourceLine" id="cb209-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb209-6" data-line-number="6"><span class="kw">g03</span>()</a>
<a class="sourceLine" id="cb209-7" data-line-number="7"><span class="co">#&gt; [1] 2 1</span></a>
<a class="sourceLine" id="cb209-8" data-line-number="8"></a>
<a class="sourceLine" id="cb209-9" data-line-number="9"><span class="co"># And this doesn&#39;t change the previous value of y</span></a>
<a class="sourceLine" id="cb209-10" data-line-number="10">y</a>
<a class="sourceLine" id="cb209-11" data-line-number="11"><span class="co">#&gt; [1] 20</span></a></code></pre></div>
<p>The same rules apply if a function is defined inside another function. First, R looks inside the current function. Then, it looks where that function was defined (and so on, all the way up to the global environment). Finally, it looks in other loaded packages.</p>
<p>Run the following code in your head, then confirm the result by running the code.<a href="#fn27" class="footnote-ref" id="fnref27"><sup>27</sup></a></p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb210-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb210-2" data-line-number="2">g04 &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb210-3" data-line-number="3">  y &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb210-4" data-line-number="4">  i &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb210-5" data-line-number="5">    z &lt;-<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb210-6" data-line-number="6">    <span class="kw">c</span>(x, y, z)</a>
<a class="sourceLine" id="cb210-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb210-8" data-line-number="8">  <span class="kw">i</span>()</a>
<a class="sourceLine" id="cb210-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb210-10" data-line-number="10"><span class="kw">g04</span>()</a></code></pre></div>
<p>The same rules also apply to functions created by other functions, which I call manufactured functions, the topic of Chapter <a href="function-factories.html#function-factories">10</a>.</p>
</div>
<div id="functions-versus-variables" class="section level3">
<h3><span class="header-section-number">6.4.2</span> Functions versus variables</h3>
<p>In R, functions are ordinary objects. This means the scoping rules described above also apply to functions:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb211-1" data-line-number="1">g07 &lt;-<span class="st"> </span><span class="cf">function</span>(x) x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb211-2" data-line-number="2">g08 &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb211-3" data-line-number="3">  g07 &lt;-<span class="st"> </span><span class="cf">function</span>(x) x <span class="op">+</span><span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb211-4" data-line-number="4">  <span class="kw">g07</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb211-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb211-6" data-line-number="6"><span class="kw">g08</span>()</a>
<a class="sourceLine" id="cb211-7" data-line-number="7"><span class="co">#&gt; [1] 110</span></a></code></pre></div>
<p>However, when a function and a non-function share the same name (they must, of course, reside in different environments), applying these rules gets a little more complicated. When you use a name in a function call, R ignores non-function objects when looking for that value. For example, in the code below, <code>g09</code> takes on two different values:</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb212-1" data-line-number="1">g09 &lt;-<span class="st"> </span><span class="cf">function</span>(x) x <span class="op">+</span><span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb212-2" data-line-number="2">g10 &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb212-3" data-line-number="3">  g09 &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb212-4" data-line-number="4">  <span class="kw">g09</span>(g09)</a>
<a class="sourceLine" id="cb212-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb212-6" data-line-number="6"><span class="kw">g10</span>()</a>
<a class="sourceLine" id="cb212-7" data-line-number="7"><span class="co">#&gt; [1] 110</span></a></code></pre></div>
<p>For the record, using the same name for different things is confusing and best avoided!</p>
</div>
<div id="fresh-start" class="section level3">
<h3><span class="header-section-number">6.4.3</span> A fresh start</h3>
<p>What happens to values between invocations of a function? Consider the example below. What will happen the first time you run this function? What will happen the second time?<a href="#fn28" class="footnote-ref" id="fnref28"><sup>28</sup></a> (If you haven’t seen <code>exists()</code> before, it returns <code>TRUE</code> if there’s a variable with that name and returns <code>FALSE</code> if not.)</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb213-1" data-line-number="1">g11 &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb213-2" data-line-number="2">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">exists</span>(<span class="st">&quot;a&quot;</span>)) {</a>
<a class="sourceLine" id="cb213-3" data-line-number="3">    a &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb213-4" data-line-number="4">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb213-5" data-line-number="5">    a &lt;-<span class="st"> </span>a <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb213-6" data-line-number="6">  }</a>
<a class="sourceLine" id="cb213-7" data-line-number="7">  a</a>
<a class="sourceLine" id="cb213-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb213-9" data-line-number="9"></a>
<a class="sourceLine" id="cb213-10" data-line-number="10"><span class="kw">g11</span>()</a>
<a class="sourceLine" id="cb213-11" data-line-number="11"><span class="kw">g11</span>()</a></code></pre></div>
<p>You might be surprised that <code>g11()</code> always returns the same value. This happens because every time a function is called a new environment is created to host its execution. This means that a function has no way to tell what happened the last time it was run; each invocation is completely independent. We’ll see some ways to get around this in Section <a href="function-factories.html#stateful-funs">10.2.4</a>.</p>
</div>
<div id="dynamic-lookup" class="section level3">
<h3><span class="header-section-number">6.4.4</span> Dynamic lookup</h3>

<p>Lexical scoping determines where, but not when to look for values. R looks for values when the function is run, not when the function is created. Together, these two properties tell us that the output of a function can differ depending on the objects outside the function’s environment:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb214-1" data-line-number="1">g12 &lt;-<span class="st"> </span><span class="cf">function</span>() x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb214-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="dv">15</span></a>
<a class="sourceLine" id="cb214-3" data-line-number="3"><span class="kw">g12</span>()</a>
<a class="sourceLine" id="cb214-4" data-line-number="4"><span class="co">#&gt; [1] 16</span></a>
<a class="sourceLine" id="cb214-5" data-line-number="5"></a>
<a class="sourceLine" id="cb214-6" data-line-number="6">x &lt;-<span class="st"> </span><span class="dv">20</span></a>
<a class="sourceLine" id="cb214-7" data-line-number="7"><span class="kw">g12</span>()</a>
<a class="sourceLine" id="cb214-8" data-line-number="8"><span class="co">#&gt; [1] 21</span></a></code></pre></div>
<p>This behaviour can be quite annoying. If you make a spelling mistake in your code, you won’t get an error message when you create the function. And depending on the variables defined in the global environment, you might not even get an error message when you run the function.</p>
<p>To detect this problem, use <code>codetools::findGlobals()</code>. This function lists all the external dependencies (unbound symbols) within a function:</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb215-1" data-line-number="1">codetools<span class="op">::</span><span class="kw">findGlobals</span>(g12)</a>
<a class="sourceLine" id="cb215-2" data-line-number="2"><span class="co">#&gt; [1] &quot;+&quot; &quot;x&quot;</span></a></code></pre></div>
<p>To solve this problem, you can manually change the function’s environment to the <code>emptyenv()</code>, an environment which contains nothing:</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb216-1" data-line-number="1"><span class="kw">environment</span>(g12) &lt;-<span class="st"> </span><span class="kw">emptyenv</span>()</a>
<a class="sourceLine" id="cb216-2" data-line-number="2"><span class="kw">g12</span>()</a>
<a class="sourceLine" id="cb216-3" data-line-number="3"><span class="co">#&gt; Error in x + 1: could not find function &quot;+&quot;</span></a></code></pre></div>
<p>The problem and its solution reveal why this seemingly undesirable behaviour exists: R relies on lexical scoping to find <em>everything</em>, from the obvious, like <code>mean()</code>, to the less obvious, like <code>+</code> or even <code>{</code>. This gives R’s scoping rules a rather beautiful simplicity.</p>
</div>
<div id="exercises-1" class="section level3">
<h3><span class="header-section-number">6.4.5</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>What does the following code return? Why? Describe how each of the three
<code>c</code>’s is interpreted.</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb217-1" data-line-number="1">c &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb217-2" data-line-number="2"><span class="kw">c</span>(<span class="dt">c =</span> c)</a></code></pre></div></li>
<li><p>What are the four principles that govern how R looks for values?</p></li>
<li><p>What does the following function return? Make a prediction before
running the code yourself.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb218-1" data-line-number="1">f &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb218-2" data-line-number="2">  f &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb218-3" data-line-number="3">    f &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb218-4" data-line-number="4">      x <span class="op">^</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb218-5" data-line-number="5">    }</a>
<a class="sourceLine" id="cb218-6" data-line-number="6">    <span class="kw">f</span>() <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb218-7" data-line-number="7">  }</a>
<a class="sourceLine" id="cb218-8" data-line-number="8">  <span class="kw">f</span>(x) <span class="op">*</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb218-9" data-line-number="9">}</a>
<a class="sourceLine" id="cb218-10" data-line-number="10"><span class="kw">f</span>(<span class="dv">10</span>)</a></code></pre></div></li>
</ol>
</div>
</div>
<div id="lazy-evaluation" class="section level2">
<h2><span class="header-section-number">6.5</span> Lazy evaluation</h2>
<p>

</p>
<p>In R, function arguments are <strong>lazily evaluated</strong>: they’re only evaluated if accessed. For example, this code doesn’t generate an error because <code>x</code> is never used:</p>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb219-1" data-line-number="1">h01 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb219-2" data-line-number="2">  <span class="dv">10</span></a>
<a class="sourceLine" id="cb219-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb219-4" data-line-number="4"><span class="kw">h01</span>(<span class="kw">stop</span>(<span class="st">&quot;This is an error!&quot;</span>))</a>
<a class="sourceLine" id="cb219-5" data-line-number="5"><span class="co">#&gt; [1] 10</span></a></code></pre></div>
<p>This is an important feature because it allows you to do things like include potentially expensive computations in function arguments that will only be evaluated if needed.</p>
<div id="promises" class="section level3">
<h3><span class="header-section-number">6.5.1</span> Promises</h3>
<p>
</p>
<p>Lazy evaluation is powered by a data structure called a <strong>promise</strong>, or (less commonly) a thunk. It’s one of the features that makes R such an interesting programming language (we’ll return to promises again in Section <a href="evaluation.html#quosures">20.3</a>).</p>
<p>A promise has three components:</p>
<ul>
<li><p>An expression, like <code>x + y</code>, which gives rise to the delayed computation.</p></li>
<li><p>An environment where the expression should be evaluated, i.e. the
environment where the function is called. This makes sure that the
following function returns 11, not 101:</p>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb220-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb220-2" data-line-number="2">h02 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb220-3" data-line-number="3">  y &lt;-<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb220-4" data-line-number="4">  x <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb220-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb220-6" data-line-number="6"></a>
<a class="sourceLine" id="cb220-7" data-line-number="7"><span class="kw">h02</span>(y)</a>
<a class="sourceLine" id="cb220-8" data-line-number="8"><span class="co">#&gt; [1] 11</span></a></code></pre></div>
<p>This also means that when you do assignment inside a call to a function,
the variable is bound outside of the function, not inside of it.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb221-1" data-line-number="1"><span class="kw">h02</span>(y &lt;-<span class="st"> </span><span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb221-2" data-line-number="2"><span class="co">#&gt; [1] 1001</span></a>
<a class="sourceLine" id="cb221-3" data-line-number="3">y</a>
<a class="sourceLine" id="cb221-4" data-line-number="4"><span class="co">#&gt; [1] 1000</span></a></code></pre></div></li>
<li><p>A value, which is computed and cached the first time a promise is
accessed when the expression is evaluated in the specified environment.
This ensures that the promise is evaluated at most once, and is why you
only see “Calculating…” printed once in the following example.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb222-1" data-line-number="1">double &lt;-<span class="st"> </span><span class="cf">function</span>(x) { </a>
<a class="sourceLine" id="cb222-2" data-line-number="2">  <span class="kw">message</span>(<span class="st">&quot;Calculating...&quot;</span>)</a>
<a class="sourceLine" id="cb222-3" data-line-number="3">  x <span class="op">*</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb222-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb222-5" data-line-number="5"></a>
<a class="sourceLine" id="cb222-6" data-line-number="6">h03 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb222-7" data-line-number="7">  <span class="kw">c</span>(x, x)</a>
<a class="sourceLine" id="cb222-8" data-line-number="8">}</a>
<a class="sourceLine" id="cb222-9" data-line-number="9"></a>
<a class="sourceLine" id="cb222-10" data-line-number="10"><span class="kw">h03</span>(<span class="kw">double</span>(<span class="dv">20</span>))</a>
<a class="sourceLine" id="cb222-11" data-line-number="11"><span class="co">#&gt; Calculating...</span></a>
<a class="sourceLine" id="cb222-12" data-line-number="12"><span class="co">#&gt; [1] 40 40</span></a></code></pre></div></li>
</ul>
<p>You cannot manipulate promises with R code. Promises are like a quantum state: any attempt to inspect them with R code will force an immediate evaluation, making the promise disappear. Later, in Section <a href="evaluation.html#quosures">20.3</a>, you’ll learn about quosures, which convert promises into an R object where you can easily inspect the expression and the environment.</p>
</div>
<div id="default-arguments" class="section level3">
<h3><span class="header-section-number">6.5.2</span> Default arguments</h3>
<p></p>
<p>Thanks to lazy evaluation, default values can be defined in terms of other arguments, or even in terms of variables defined later in the function:</p>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb223-1" data-line-number="1">h04 &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">y =</span> x <span class="op">*</span><span class="st"> </span><span class="dv">2</span>, <span class="dt">z =</span> a <span class="op">+</span><span class="st"> </span>b) {</a>
<a class="sourceLine" id="cb223-2" data-line-number="2">  a &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb223-3" data-line-number="3">  b &lt;-<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb223-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb223-5" data-line-number="5">  <span class="kw">c</span>(x, y, z)</a>
<a class="sourceLine" id="cb223-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb223-7" data-line-number="7"></a>
<a class="sourceLine" id="cb223-8" data-line-number="8"><span class="kw">h04</span>()</a>
<a class="sourceLine" id="cb223-9" data-line-number="9"><span class="co">#&gt; [1]   1   2 110</span></a></code></pre></div>
<p>Many base R functions use this technique, but I don’t recommend it. It makes the code harder to understand: to predict <em>what</em> will be returned, you need to know the exact order in which default arguments are evaluated.</p>
<p>The evaluation environment is slightly different for default and user supplied arguments, as default arguments are evaluated inside the function. This means that seemingly identical calls can yield different results. It’s easiest to see this with an extreme example:</p>
<div class="sourceCode" id="cb224"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb224-1" data-line-number="1">h05 &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">x =</span> <span class="kw">ls</span>()) {</a>
<a class="sourceLine" id="cb224-2" data-line-number="2">  a &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb224-3" data-line-number="3">  x</a>
<a class="sourceLine" id="cb224-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb224-5" data-line-number="5"></a>
<a class="sourceLine" id="cb224-6" data-line-number="6"><span class="co"># ls() evaluated inside h05:</span></a>
<a class="sourceLine" id="cb224-7" data-line-number="7"><span class="kw">h05</span>()</a>
<a class="sourceLine" id="cb224-8" data-line-number="8"><span class="co">#&gt; [1] &quot;a&quot; &quot;x&quot;</span></a>
<a class="sourceLine" id="cb224-9" data-line-number="9"></a>
<a class="sourceLine" id="cb224-10" data-line-number="10"><span class="co"># ls() evaluated in global environment:</span></a>
<a class="sourceLine" id="cb224-11" data-line-number="11"><span class="kw">h05</span>(<span class="kw">ls</span>())</a>
<a class="sourceLine" id="cb224-12" data-line-number="12"><span class="co">#&gt; [1] &quot;h05&quot;</span></a></code></pre></div>
</div>
<div id="missing-arguments" class="section level3">
<h3><span class="header-section-number">6.5.3</span> Missing arguments</h3>
<p>
</p>
<p>To determine if an argument’s value comes from the user or from a default, you can use <code>missing()</code>:</p>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb225-1" data-line-number="1">h06 &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">x =</span> <span class="dv">10</span>) {</a>
<a class="sourceLine" id="cb225-2" data-line-number="2">  <span class="kw">list</span>(<span class="kw">missing</span>(x), x)</a>
<a class="sourceLine" id="cb225-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb225-4" data-line-number="4"><span class="kw">str</span>(<span class="kw">h06</span>())</a>
<a class="sourceLine" id="cb225-5" data-line-number="5"><span class="co">#&gt; List of 2</span></a>
<a class="sourceLine" id="cb225-6" data-line-number="6"><span class="co">#&gt;  $ : logi TRUE</span></a>
<a class="sourceLine" id="cb225-7" data-line-number="7"><span class="co">#&gt;  $ : num 10</span></a>
<a class="sourceLine" id="cb225-8" data-line-number="8"><span class="kw">str</span>(<span class="kw">h06</span>(<span class="dv">10</span>))</a>
<a class="sourceLine" id="cb225-9" data-line-number="9"><span class="co">#&gt; List of 2</span></a>
<a class="sourceLine" id="cb225-10" data-line-number="10"><span class="co">#&gt;  $ : logi FALSE</span></a>
<a class="sourceLine" id="cb225-11" data-line-number="11"><span class="co">#&gt;  $ : num 10</span></a></code></pre></div>
<p><code>missing()</code> is best used sparingly, however. Take <code>sample()</code>, for example. How many arguments are required?</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb226-1" data-line-number="1"><span class="kw">args</span>(sample)</a>
<a class="sourceLine" id="cb226-2" data-line-number="2"><span class="co">#&gt; function (x, size, replace = FALSE, prob = NULL) </span></a>
<a class="sourceLine" id="cb226-3" data-line-number="3"><span class="co">#&gt; NULL</span></a></code></pre></div>
<p>It looks like both <code>x</code> and <code>size</code> are required, but if <code>size</code> is not supplied, <code>sample()</code> uses <code>missing()</code> to provide a default. If I were to rewrite sample, I’d use an explicit <code>NULL</code> to indicate that <code>size</code> is not required but can be supplied:</p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb227-1" data-line-number="1">sample &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">size =</span> <span class="ot">NULL</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>, <span class="dt">prob =</span> <span class="ot">NULL</span>) {</a>
<a class="sourceLine" id="cb227-2" data-line-number="2">  <span class="cf">if</span> (<span class="kw">is.null</span>(size)) {</a>
<a class="sourceLine" id="cb227-3" data-line-number="3">    size &lt;-<span class="st"> </span><span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb227-4" data-line-number="4">  }</a>
<a class="sourceLine" id="cb227-5" data-line-number="5">  </a>
<a class="sourceLine" id="cb227-6" data-line-number="6">  x[<span class="kw">sample.int</span>(<span class="kw">length</span>(x), size, <span class="dt">replace =</span> replace, <span class="dt">prob =</span> prob)]</a>
<a class="sourceLine" id="cb227-7" data-line-number="7">}</a></code></pre></div>
<p>With the binary pattern created by the <code>%||%</code> infix function, which uses the left side if it’s not <code>NULL</code> and the right side otherwise, we can further simplify <code>sample()</code>:
</p>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb228-1" data-line-number="1"><span class="st">`</span><span class="dt">%||%</span><span class="st">`</span> &lt;-<span class="st"> </span><span class="cf">function</span>(lhs, rhs) {</a>
<a class="sourceLine" id="cb228-2" data-line-number="2">  <span class="cf">if</span> (<span class="op">!</span><span class="kw">is.null</span>(lhs)) {</a>
<a class="sourceLine" id="cb228-3" data-line-number="3">    lhs</a>
<a class="sourceLine" id="cb228-4" data-line-number="4">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb228-5" data-line-number="5">    rhs</a>
<a class="sourceLine" id="cb228-6" data-line-number="6">  }</a>
<a class="sourceLine" id="cb228-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb228-8" data-line-number="8"></a>
<a class="sourceLine" id="cb228-9" data-line-number="9">sample &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">size =</span> <span class="ot">NULL</span>, <span class="dt">replace =</span> <span class="ot">FALSE</span>, <span class="dt">prob =</span> <span class="ot">NULL</span>) {</a>
<a class="sourceLine" id="cb228-10" data-line-number="10">  size &lt;-<span class="st"> </span>size <span class="op">%||%</span><span class="st"> </span><span class="kw">length</span>(x)</a>
<a class="sourceLine" id="cb228-11" data-line-number="11">  x[<span class="kw">sample.int</span>(<span class="kw">length</span>(x), size, <span class="dt">replace =</span> replace, <span class="dt">prob =</span> prob)]</a>
<a class="sourceLine" id="cb228-12" data-line-number="12">}</a></code></pre></div>
<p>Because of lazy evaluation, you don’t need to worry about unnecessary computation: the right side of <code>%||%</code> will only be evaluated if the left side is <code>NULL</code>.</p>
</div>
<div id="exercises-2" class="section level3">
<h3><span class="header-section-number">6.5.4</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>What important property of <code>&amp;&amp;</code> makes <code>x_ok()</code> work?</p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb229-1" data-line-number="1">x_ok &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb229-2" data-line-number="2">  <span class="op">!</span><span class="kw">is.null</span>(x) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">length</span>(x) <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;&amp;</span><span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb229-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb229-4" data-line-number="4"></a>
<a class="sourceLine" id="cb229-5" data-line-number="5"><span class="kw">x_ok</span>(<span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb229-6" data-line-number="6"><span class="co">#&gt; [1] FALSE</span></a>
<a class="sourceLine" id="cb229-7" data-line-number="7"><span class="kw">x_ok</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb229-8" data-line-number="8"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb229-9" data-line-number="9"><span class="kw">x_ok</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb229-10" data-line-number="10"><span class="co">#&gt; [1] FALSE</span></a></code></pre></div>
<p>What is different with this code? Why is this behaviour undesirable here?</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb230-1" data-line-number="1">x_ok &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb230-2" data-line-number="2">  <span class="op">!</span><span class="kw">is.null</span>(x) <span class="op">&amp;</span><span class="st"> </span><span class="kw">length</span>(x) <span class="op">==</span><span class="st"> </span><span class="dv">1</span> <span class="op">&amp;</span><span class="st"> </span>x <span class="op">&gt;</span><span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb230-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb230-4" data-line-number="4"></a>
<a class="sourceLine" id="cb230-5" data-line-number="5"><span class="kw">x_ok</span>(<span class="ot">NULL</span>)</a>
<a class="sourceLine" id="cb230-6" data-line-number="6"><span class="co">#&gt; logical(0)</span></a>
<a class="sourceLine" id="cb230-7" data-line-number="7"><span class="kw">x_ok</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb230-8" data-line-number="8"><span class="co">#&gt; [1] TRUE</span></a>
<a class="sourceLine" id="cb230-9" data-line-number="9"><span class="kw">x_ok</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb230-10" data-line-number="10"><span class="co">#&gt; [1] FALSE FALSE FALSE</span></a></code></pre></div></li>
<li><p>What does this function return? Why? Which principle does it illustrate?</p>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb231-1" data-line-number="1">f2 &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">x =</span> z) {</a>
<a class="sourceLine" id="cb231-2" data-line-number="2">  z &lt;-<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb231-3" data-line-number="3">  x</a>
<a class="sourceLine" id="cb231-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb231-5" data-line-number="5"><span class="kw">f2</span>()</a></code></pre></div></li>
<li><p>What does this function return? Why? Which principle does it illustrate?</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb232-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb232-2" data-line-number="2">f1 &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">x =</span> {y &lt;-<span class="st"> </span><span class="dv">1</span>; <span class="dv">2</span>}, <span class="dt">y =</span> <span class="dv">0</span>) {</a>
<a class="sourceLine" id="cb232-3" data-line-number="3">  <span class="kw">c</span>(x, y)</a>
<a class="sourceLine" id="cb232-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb232-5" data-line-number="5"><span class="kw">f1</span>()</a>
<a class="sourceLine" id="cb232-6" data-line-number="6">y</a></code></pre></div></li>
<li><p>In <code>hist()</code>, the default value of <code>xlim</code> is <code>range(breaks)</code>, the default
value for <code>breaks</code> is <code>&quot;Sturges&quot;</code>, and</p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb233-1" data-line-number="1"><span class="kw">range</span>(<span class="st">&quot;Sturges&quot;</span>)</a>
<a class="sourceLine" id="cb233-2" data-line-number="2"><span class="co">#&gt; [1] &quot;Sturges&quot; &quot;Sturges&quot;</span></a></code></pre></div>
<p>Explain how <code>hist()</code> works to get a correct <code>xlim</code> value.</p></li>
<li><p>Explain why this function works. Why is it confusing?</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb234-1" data-line-number="1">show_time &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">x =</span> <span class="kw">stop</span>(<span class="st">&quot;Error!&quot;</span>)) {</a>
<a class="sourceLine" id="cb234-2" data-line-number="2">  stop &lt;-<span class="st"> </span><span class="cf">function</span>(...) <span class="kw">Sys.time</span>()</a>
<a class="sourceLine" id="cb234-3" data-line-number="3">  <span class="kw">print</span>(x)</a>
<a class="sourceLine" id="cb234-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb234-5" data-line-number="5"><span class="kw">show_time</span>()</a>
<a class="sourceLine" id="cb234-6" data-line-number="6"><span class="co">#&gt; [1] &quot;2020-09-10 21:35:49 PDT&quot;</span></a></code></pre></div></li>
<li><p>How many arguments are required when calling <code>library()</code>?</p></li>
</ol>
</div>
</div>
<div id="fun-dot-dot-dot" class="section level2">
<h2><span class="header-section-number">6.6</span> <code>...</code> (dot-dot-dot)</h2>

<p>

</p>
<p>Functions can have a special argument <code>...</code> (pronounced dot-dot-dot). With it, a function can take any number of additional arguments. In other programming languages, this type of argument is often called <em>varargs</em> (short for variable arguments), and a function that uses it is said to be variadic.</p>
<p>You can also use <code>...</code> to pass those additional arguments on to another function.</p>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb235-1" data-line-number="1">i01 &lt;-<span class="st"> </span><span class="cf">function</span>(y, z) {</a>
<a class="sourceLine" id="cb235-2" data-line-number="2">  <span class="kw">list</span>(<span class="dt">y =</span> y, <span class="dt">z =</span> z)</a>
<a class="sourceLine" id="cb235-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb235-4" data-line-number="4"></a>
<a class="sourceLine" id="cb235-5" data-line-number="5">i02 &lt;-<span class="st"> </span><span class="cf">function</span>(x, ...) {</a>
<a class="sourceLine" id="cb235-6" data-line-number="6">  <span class="kw">i01</span>(...)</a>
<a class="sourceLine" id="cb235-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb235-8" data-line-number="8"></a>
<a class="sourceLine" id="cb235-9" data-line-number="9"><span class="kw">str</span>(<span class="kw">i02</span>(<span class="dt">x =</span> <span class="dv">1</span>, <span class="dt">y =</span> <span class="dv">2</span>, <span class="dt">z =</span> <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb235-10" data-line-number="10"><span class="co">#&gt; List of 2</span></a>
<a class="sourceLine" id="cb235-11" data-line-number="11"><span class="co">#&gt;  $ y: num 2</span></a>
<a class="sourceLine" id="cb235-12" data-line-number="12"><span class="co">#&gt;  $ z: num 3</span></a></code></pre></div>
<p>Using a special form, <code>..N</code>, it’s possible (but rarely useful) to refer to elements of <code>...</code> by position:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb236-1" data-line-number="1">i03 &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</a>
<a class="sourceLine" id="cb236-2" data-line-number="2">  <span class="kw">list</span>(<span class="dt">first =</span> ..<span class="dv">1</span>, <span class="dt">third =</span> ..<span class="dv">3</span>)</a>
<a class="sourceLine" id="cb236-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb236-4" data-line-number="4"><span class="kw">str</span>(<span class="kw">i03</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb236-5" data-line-number="5"><span class="co">#&gt; List of 2</span></a>
<a class="sourceLine" id="cb236-6" data-line-number="6"><span class="co">#&gt;  $ first: num 1</span></a>
<a class="sourceLine" id="cb236-7" data-line-number="7"><span class="co">#&gt;  $ third: num 3</span></a></code></pre></div>
<p>More useful is <code>list(...)</code>, which evaluates the arguments and stores them in a list:</p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb237-1" data-line-number="1">i04 &lt;-<span class="st"> </span><span class="cf">function</span>(...) {</a>
<a class="sourceLine" id="cb237-2" data-line-number="2">  <span class="kw">list</span>(...)</a>
<a class="sourceLine" id="cb237-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb237-4" data-line-number="4"><span class="kw">str</span>(<span class="kw">i04</span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb237-5" data-line-number="5"><span class="co">#&gt; List of 2</span></a>
<a class="sourceLine" id="cb237-6" data-line-number="6"><span class="co">#&gt;  $ a: num 1</span></a>
<a class="sourceLine" id="cb237-7" data-line-number="7"><span class="co">#&gt;  $ b: num 2</span></a></code></pre></div>
<p>(See also <code>rlang::list2()</code> to support splicing and to silently ignore trailing commas, and <code>rlang::enquos()</code> to capture unevaluated arguments, the topic of [quasiquotation].)</p>
<p>There are two primary uses of <code>...</code>, both of which we’ll come back to later in the book:</p>
<ul>
<li><p>If your function takes a function as an argument, you want some way to
pass additional arguments to that function. In this example, <code>lapply()</code>
uses <code>...</code> to pass <code>na.rm</code> on to <code>mean()</code>:</p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb238-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="ot">NA</span>), <span class="kw">c</span>(<span class="dv">4</span>, <span class="ot">NA</span>, <span class="dv">6</span>))</a>
<a class="sourceLine" id="cb238-2" data-line-number="2"><span class="kw">str</span>(<span class="kw">lapply</span>(x, mean, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb238-3" data-line-number="3"><span class="co">#&gt; List of 2</span></a>
<a class="sourceLine" id="cb238-4" data-line-number="4"><span class="co">#&gt;  $ : num 2</span></a>
<a class="sourceLine" id="cb238-5" data-line-number="5"><span class="co">#&gt;  $ : num 5</span></a></code></pre></div>
<p>We’ll come back to this technique in Section <a href="functionals.html#passing-arguments">9.2.3</a>.</p></li>
<li><p>If your function is an S3 generic, you need some way to allow methods to
take arbitrary extra arguments. For example, take the <code>print()</code> function.
Because there are different options for printing depending on the type of
object, there’s no way to pre-specify every possible argument and <code>...</code>
allows individual methods to have different arguments:</p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb239-1" data-line-number="1"><span class="kw">print</span>(<span class="kw">factor</span>(letters), <span class="dt">max.levels =</span> <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb239-2" data-line-number="2"></a>
<a class="sourceLine" id="cb239-3" data-line-number="3"><span class="kw">print</span>(y <span class="op">~</span><span class="st"> </span>x, <span class="dt">showEnv =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<p>We’ll come back to this use of <code>...</code> in Section <a href="s3.html#s3-arguments">13.4.3</a>.</p></li>
</ul>
<p>Using <code>...</code> comes with two downsides:</p>
<ul>
<li><p>When you use it to pass arguments to another function, you have to
carefully explain to the user where those arguments go. This makes it
hard to understand what you can do with functions like <code>lapply()</code> and
<code>plot()</code>.</p></li>
<li><p>A misspelled argument will not raise an error. This makes it easy for
typos to go unnoticed:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb240-1" data-line-number="1"><span class="kw">sum</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="ot">NA</span>, <span class="dt">na_rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb240-2" data-line-number="2"><span class="co">#&gt; [1] NA</span></a></code></pre></div></li>
</ul>
<div id="exercises-3" class="section level3">
<h3><span class="header-section-number">6.6.1</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Explain the following results:</p>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb241-1" data-line-number="1"><span class="kw">sum</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb241-2" data-line-number="2"><span class="co">#&gt; [1] 6</span></a>
<a class="sourceLine" id="cb241-3" data-line-number="3"><span class="kw">mean</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb241-4" data-line-number="4"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb241-5" data-line-number="5"></a>
<a class="sourceLine" id="cb241-6" data-line-number="6"><span class="kw">sum</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dt">na.omit =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb241-7" data-line-number="7"><span class="co">#&gt; [1] 7</span></a>
<a class="sourceLine" id="cb241-8" data-line-number="8"><span class="kw">mean</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dt">na.omit =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb241-9" data-line-number="9"><span class="co">#&gt; [1] 1</span></a></code></pre></div></li>
<li><p>Explain how to find the documentation for the named arguments in the
following function call:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb242-1" data-line-number="1"><span class="kw">plot</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">pch =</span> <span class="dv">20</span>, <span class="dt">xlab =</span> <span class="st">&quot;x&quot;</span>, <span class="dt">col.lab =</span> <span class="st">&quot;blue&quot;</span>)</a></code></pre></div>
<p><img src="Functions_files/figure-html/unnamed-chunk-58-1.png" width="70%" style="display: block; margin: auto;" /></p></li>
<li><p>Why does <code>plot(1:10, col = &quot;red&quot;)</code> only colour the points, not the axes
or labels? Read the source code of <code>plot.default()</code> to find out.</p></li>
</ol>
</div>
</div>
<div id="exiting-a-function" class="section level2">
<h2><span class="header-section-number">6.7</span> Exiting a function</h2>
<p>Most functions exit in one of two ways<a href="#fn29" class="footnote-ref" id="fnref29"><sup>29</sup></a>: they either return a value, indicating success, or they throw an error, indicating failure. This section describes return values (implicit versus explicit; visible versus invisible), briefly discusses errors, and introduces exit handlers, which allow you to run code when a function exits.</p>
<div id="implicit-versus-explicit-returns" class="section level3">
<h3><span class="header-section-number">6.7.1</span> Implicit versus explicit returns</h3>
<p>
</p>
<p>There are two ways that a function can return a value:</p>
<ul>
<li><p>Implicitly, where the last evaluated expression is the return value:</p>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb243-1" data-line-number="1">j01 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb243-2" data-line-number="2">  <span class="cf">if</span> (x <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>) {</a>
<a class="sourceLine" id="cb243-3" data-line-number="3">    <span class="dv">0</span></a>
<a class="sourceLine" id="cb243-4" data-line-number="4">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb243-5" data-line-number="5">    <span class="dv">10</span></a>
<a class="sourceLine" id="cb243-6" data-line-number="6">  }</a>
<a class="sourceLine" id="cb243-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb243-8" data-line-number="8"><span class="kw">j01</span>(<span class="dv">5</span>)</a>
<a class="sourceLine" id="cb243-9" data-line-number="9"><span class="co">#&gt; [1] 0</span></a>
<a class="sourceLine" id="cb243-10" data-line-number="10"><span class="kw">j01</span>(<span class="dv">15</span>)</a>
<a class="sourceLine" id="cb243-11" data-line-number="11"><span class="co">#&gt; [1] 10</span></a></code></pre></div></li>
<li><p>Explicitly, by calling <code>return()</code>:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb244-1" data-line-number="1">j02 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb244-2" data-line-number="2">  <span class="cf">if</span> (x <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>) {</a>
<a class="sourceLine" id="cb244-3" data-line-number="3">    <span class="kw">return</span>(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb244-4" data-line-number="4">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb244-5" data-line-number="5">    <span class="kw">return</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb244-6" data-line-number="6">  }</a>
<a class="sourceLine" id="cb244-7" data-line-number="7">}</a></code></pre></div></li>
</ul>
</div>
<div id="invisible" class="section level3">
<h3><span class="header-section-number">6.7.2</span> Invisible values</h3>

<p>
</p>
<p>Most functions return visibly: calling the function in an interactive context prints the result.</p>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb245-1" data-line-number="1">j03 &lt;-<span class="st"> </span><span class="cf">function</span>() <span class="dv">1</span></a>
<a class="sourceLine" id="cb245-2" data-line-number="2"><span class="kw">j03</span>()</a>
<a class="sourceLine" id="cb245-3" data-line-number="3"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
<p>However, you can prevent automatic printing by applying <code>invisible()</code> to the last value:</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb246-1" data-line-number="1">j04 &lt;-<span class="st"> </span><span class="cf">function</span>() <span class="kw">invisible</span>(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb246-2" data-line-number="2"><span class="kw">j04</span>()</a></code></pre></div>
<p>To verify that this value does indeed exist, you can explicitly print it or wrap it in parentheses:</p>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb247-1" data-line-number="1"><span class="kw">print</span>(<span class="kw">j04</span>())</a>
<a class="sourceLine" id="cb247-2" data-line-number="2"><span class="co">#&gt; [1] 1</span></a>
<a class="sourceLine" id="cb247-3" data-line-number="3"></a>
<a class="sourceLine" id="cb247-4" data-line-number="4">(<span class="kw">j04</span>())</a>
<a class="sourceLine" id="cb247-5" data-line-number="5"><span class="co">#&gt; [1] 1</span></a></code></pre></div>
<p>Alternatively, you can use <code>withVisible()</code> to return the value and a visibility flag:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb248-1" data-line-number="1"><span class="kw">str</span>(<span class="kw">withVisible</span>(<span class="kw">j04</span>()))</a>
<a class="sourceLine" id="cb248-2" data-line-number="2"><span class="co">#&gt; List of 2</span></a>
<a class="sourceLine" id="cb248-3" data-line-number="3"><span class="co">#&gt;  $ value  : num 1</span></a>
<a class="sourceLine" id="cb248-4" data-line-number="4"><span class="co">#&gt;  $ visible: logi FALSE</span></a></code></pre></div>
<p>The most common function that returns invisibly is <code>&lt;-</code>:</p>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb249-1" data-line-number="1">a &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb249-2" data-line-number="2">(a &lt;-<span class="st"> </span><span class="dv">2</span>)</a>
<a class="sourceLine" id="cb249-3" data-line-number="3"><span class="co">#&gt; [1] 2</span></a></code></pre></div>
<p>This is what makes it possible to chain assignments:</p>
<div class="sourceCode" id="cb250"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb250-1" data-line-number="1">a &lt;-<span class="st"> </span>b &lt;-<span class="st"> </span>c &lt;-<span class="st"> </span>d &lt;-<span class="st"> </span><span class="dv">2</span></a></code></pre></div>
<p>In general, any function called primarily for a side effect (like <code>&lt;-</code>, <code>print()</code>, or <code>plot()</code>) should return an invisible value (typically the value of the first argument).</p>
</div>
<div id="errors" class="section level3">
<h3><span class="header-section-number">6.7.3</span> Errors</h3>

<p></p>
<p>If a function cannot complete its assigned task, it should throw an error with <code>stop()</code>, which immediately terminates the execution of the function.</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb251-1" data-line-number="1">j05 &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb251-2" data-line-number="2">  <span class="kw">stop</span>(<span class="st">&quot;I&#39;m an error&quot;</span>)</a>
<a class="sourceLine" id="cb251-3" data-line-number="3">  <span class="kw">return</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb251-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb251-5" data-line-number="5"><span class="kw">j05</span>()</a>
<a class="sourceLine" id="cb251-6" data-line-number="6"><span class="co">#&gt; Error in j05(): I&#39;m an error</span></a></code></pre></div>
<p>An error indicates that something has gone wrong, and forces the user to deal with the problem. Some languages (like C, Go, and Rust) rely on special return values to indicate problems, but in R you should always throw an error. You’ll learn more about errors, and how to handle them, in Chapter <a href="conditions.html#conditions">8</a>.</p>
</div>
<div id="on-exit" class="section level3">
<h3><span class="header-section-number">6.7.4</span> Exit handlers</h3>

<p></p>
<p>Sometimes a function needs to make temporary changes to the global state. But having to cleanup those changes can be painful (what happens if there’s an error?). To ensure that these changes are undone and that the global state is restored no matter how a function exits, use <code>on.exit()</code> to set up an <strong>exit handler</strong>. The following simple example shows that the exit handler is run regardless of whether the function exits normally or with an error.</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb252-1" data-line-number="1">j06 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb252-2" data-line-number="2">  <span class="kw">cat</span>(<span class="st">&quot;Hello</span><span class="ch">\n</span><span class="st">&quot;</span>)</a>
<a class="sourceLine" id="cb252-3" data-line-number="3">  <span class="kw">on.exit</span>(<span class="kw">cat</span>(<span class="st">&quot;Goodbye!</span><span class="ch">\n</span><span class="st">&quot;</span>), <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb252-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb252-5" data-line-number="5">  <span class="cf">if</span> (x) {</a>
<a class="sourceLine" id="cb252-6" data-line-number="6">    <span class="kw">return</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb252-7" data-line-number="7">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb252-8" data-line-number="8">    <span class="kw">stop</span>(<span class="st">&quot;Error&quot;</span>)</a>
<a class="sourceLine" id="cb252-9" data-line-number="9">  }</a>
<a class="sourceLine" id="cb252-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb252-11" data-line-number="11"></a>
<a class="sourceLine" id="cb252-12" data-line-number="12"><span class="kw">j06</span>(<span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb252-13" data-line-number="13"><span class="co">#&gt; Hello</span></a>
<a class="sourceLine" id="cb252-14" data-line-number="14"><span class="co">#&gt; Goodbye!</span></a>
<a class="sourceLine" id="cb252-15" data-line-number="15"><span class="co">#&gt; [1] 10</span></a>
<a class="sourceLine" id="cb252-16" data-line-number="16"></a>
<a class="sourceLine" id="cb252-17" data-line-number="17"><span class="kw">j06</span>(<span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb252-18" data-line-number="18"><span class="co">#&gt; Hello</span></a>
<a class="sourceLine" id="cb252-19" data-line-number="19"><span class="co">#&gt; Error in j06(FALSE): Error</span></a>
<a class="sourceLine" id="cb252-20" data-line-number="20"><span class="co">#&gt; Goodbye!</span></a></code></pre></div>
<div class="sidebar">
<p>Always set <code>add = TRUE</code> when using <code>on.exit()</code>. If you don’t, each call to <code>on.exit()</code> will overwrite the previous exit handler. Even when only registering a single handler, it’s good practice to set <code>add = TRUE</code> so that you won’t get any unpleasant surprises if you later add more exit handlers.</p>
</div>
<p><code>on.exit()</code> is useful because it allows you to place clean-up code directly next to the code that requires clean-up:</p>
<div class="sourceCode" id="cb253"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb253-1" data-line-number="1">cleanup &lt;-<span class="st"> </span><span class="cf">function</span>(dir, code) {</a>
<a class="sourceLine" id="cb253-2" data-line-number="2">  old_dir &lt;-<span class="st"> </span><span class="kw">setwd</span>(dir)</a>
<a class="sourceLine" id="cb253-3" data-line-number="3">  <span class="kw">on.exit</span>(<span class="kw">setwd</span>(old_dir), <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb253-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb253-5" data-line-number="5">  old_opt &lt;-<span class="st"> </span><span class="kw">options</span>(<span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb253-6" data-line-number="6">  <span class="kw">on.exit</span>(<span class="kw">options</span>(old_opt), <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb253-7" data-line-number="7">}</a></code></pre></div>
<p>Coupled with lazy evaluation, this creates a very useful pattern for running a block of code in an altered environment:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb254-1" data-line-number="1">with_dir &lt;-<span class="st"> </span><span class="cf">function</span>(dir, code) {</a>
<a class="sourceLine" id="cb254-2" data-line-number="2">  old &lt;-<span class="st"> </span><span class="kw">setwd</span>(dir)</a>
<a class="sourceLine" id="cb254-3" data-line-number="3">  <span class="kw">on.exit</span>(<span class="kw">setwd</span>(old), <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb254-4" data-line-number="4"></a>
<a class="sourceLine" id="cb254-5" data-line-number="5">  <span class="kw">force</span>(code)</a>
<a class="sourceLine" id="cb254-6" data-line-number="6">}</a>
<a class="sourceLine" id="cb254-7" data-line-number="7"></a>
<a class="sourceLine" id="cb254-8" data-line-number="8"><span class="kw">getwd</span>()</a>
<a class="sourceLine" id="cb254-9" data-line-number="9"><span class="co">#&gt; [1] &quot;/Users/zihan/adv-r&quot;</span></a>
<a class="sourceLine" id="cb254-10" data-line-number="10"><span class="kw">with_dir</span>(<span class="st">&quot;~&quot;</span>, <span class="kw">getwd</span>())</a>
<a class="sourceLine" id="cb254-11" data-line-number="11"><span class="co">#&gt; [1] &quot;/Users/zihan&quot;</span></a></code></pre></div>
<p>The use of <code>force()</code> isn’t strictly necessary here as simply referring to <code>code</code> will force its evaluation. However, using <code>force()</code> makes it very clear that we are deliberately forcing the execution. You’ll learn other uses of <code>force()</code> in Chapter <a href="function-factories.html#function-factories">10</a>.</p>
<p>The withr package <span class="citation">(Hester et al. <a href="#ref-withr">2018</a>)</span> provides a collection of other functions for setting up a temporary state.</p>
<p>In R 3.4 and earlier, <code>on.exit()</code> expressions are always run in order of creation:</p>
<div class="sourceCode" id="cb255"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb255-1" data-line-number="1">j08 &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb255-2" data-line-number="2">  <span class="kw">on.exit</span>(<span class="kw">message</span>(<span class="st">&quot;a&quot;</span>), <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb255-3" data-line-number="3">  <span class="kw">on.exit</span>(<span class="kw">message</span>(<span class="st">&quot;b&quot;</span>), <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb255-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb255-5" data-line-number="5"><span class="kw">j08</span>()</a>
<a class="sourceLine" id="cb255-6" data-line-number="6"><span class="co">#&gt; a</span></a>
<a class="sourceLine" id="cb255-7" data-line-number="7"><span class="co">#&gt; b</span></a></code></pre></div>
<p>This can make cleanup a little tricky if some actions need to happen in a specific order; typically you want the most recent added expression to be run first. In R 3.5 and later, you can control this by setting <code>after = FALSE</code>:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb256-1" data-line-number="1">j09 &lt;-<span class="st"> </span><span class="cf">function</span>() {</a>
<a class="sourceLine" id="cb256-2" data-line-number="2">  <span class="kw">on.exit</span>(<span class="kw">message</span>(<span class="st">&quot;a&quot;</span>), <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">after =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb256-3" data-line-number="3">  <span class="kw">on.exit</span>(<span class="kw">message</span>(<span class="st">&quot;b&quot;</span>), <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">after =</span> <span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb256-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb256-5" data-line-number="5"><span class="kw">j09</span>()</a>
<a class="sourceLine" id="cb256-6" data-line-number="6"><span class="co">#&gt; b</span></a>
<a class="sourceLine" id="cb256-7" data-line-number="7"><span class="co">#&gt; a</span></a></code></pre></div>
</div>
<div id="exercises-4" class="section level3">
<h3><span class="header-section-number">6.7.5</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>What does <code>load()</code> return? Why don’t you normally see these values?</p></li>
<li><p>What does <code>write.table()</code> return? What would be more useful?</p></li>
<li><p>How does the <code>chdir</code> parameter of <code>source()</code> compare to <code>with_dir()</code>? Why
might you prefer one to the other?</p></li>
<li><p>Write a function that opens a graphics device, runs the supplied code, and
closes the graphics device (always, regardless of whether or not the
plotting code works).</p></li>
<li><p>We can use <code>on.exit()</code> to implement a simple version of <code>capture.output()</code>.</p>
<div class="sourceCode" id="cb257"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb257-1" data-line-number="1">capture.output2 &lt;-<span class="st"> </span><span class="cf">function</span>(code) {</a>
<a class="sourceLine" id="cb257-2" data-line-number="2">  temp &lt;-<span class="st"> </span><span class="kw">tempfile</span>()</a>
<a class="sourceLine" id="cb257-3" data-line-number="3">  <span class="kw">on.exit</span>(<span class="kw">file.remove</span>(temp), <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">after =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb257-4" data-line-number="4"></a>
<a class="sourceLine" id="cb257-5" data-line-number="5">  <span class="kw">sink</span>(temp)</a>
<a class="sourceLine" id="cb257-6" data-line-number="6">  <span class="kw">on.exit</span>(<span class="kw">sink</span>(), <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">after =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb257-7" data-line-number="7"></a>
<a class="sourceLine" id="cb257-8" data-line-number="8">  <span class="kw">force</span>(code)</a>
<a class="sourceLine" id="cb257-9" data-line-number="9">  <span class="kw">readLines</span>(temp)</a>
<a class="sourceLine" id="cb257-10" data-line-number="10">}</a>
<a class="sourceLine" id="cb257-11" data-line-number="11"><span class="kw">capture.output2</span>(<span class="kw">cat</span>(<span class="st">&quot;a&quot;</span>, <span class="st">&quot;b&quot;</span>, <span class="st">&quot;c&quot;</span>, <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>))</a>
<a class="sourceLine" id="cb257-12" data-line-number="12"><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a></code></pre></div>
<p>Compare <code>capture.output()</code> to <code>capture.output2()</code>. How do the functions
differ? What features have I removed to make the key ideas easier to see?
How have I rewritten the key ideas so they’re easier to understand?</p></li>
</ol>
</div>
</div>
<div id="function-forms" class="section level2">
<h2><span class="header-section-number">6.8</span> Function forms</h2>
<blockquote>
<p>To understand computations in R, two slogans are helpful:</p>
<ul>
<li>Everything that exists is an object.</li>
<li>Everything that happens is a function call.</li>
</ul>
<p>— John Chambers</p>
</blockquote>
<p>While everything that happens in R is a result of a function call, not all calls look the same. Function calls come in four varieties:</p>
<ul>
<li><p><strong>prefix</strong>: the function name comes before its arguments, like
<code>foofy(a, b, c)</code>. These constitute of the majority of function calls in R.</p></li>
<li><p><strong>infix</strong>: the function name comes in between its arguments, like
<code>x + y</code>. Infix forms are used for many mathematical operators, and for
user-defined functions that begin and end with <code>%</code>.</p></li>
<li><p><strong>replacement</strong>: functions that replace values by assignment, like
<code>names(df) &lt;- c(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;)</code>. They actually look like prefix functions.</p></li>
<li><p><strong>special</strong>: functions like <code>[[</code>, <code>if</code>, and <code>for</code>. While they don’t have a
consistent structure, they play important roles in R’s syntax.</p></li>
</ul>
<p>While there are four forms, you actually only need one because any call can be written in prefix form. I’ll demonstrate this property, and then you’ll learn about each of the forms in turn.</p>
<div id="prefix-transform" class="section level3">
<h3><span class="header-section-number">6.8.1</span> Rewriting to prefix form</h3>
<p>

</p>
<p>An interesting property of R is that every infix, replacement, or special form can be rewritten in prefix form. Doing so is useful because it helps you better understand the structure of the language, it gives you the real name of every function, and it allows you to modify those functions for fun and profit.</p>
<p>The following example shows three pairs of equivalent calls, rewriting an infix form, replacement form, and a special form into prefix form.</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb258-1" data-line-number="1">x <span class="op">+</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb258-2" data-line-number="2"><span class="st">`</span><span class="dt">+</span><span class="st">`</span>(x, y)</a>
<a class="sourceLine" id="cb258-3" data-line-number="3"></a>
<a class="sourceLine" id="cb258-4" data-line-number="4"><span class="kw">names</span>(df) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>, <span class="st">&quot;z&quot;</span>)</a>
<a class="sourceLine" id="cb258-5" data-line-number="5"><span class="st">`</span><span class="dt">names&lt;-</span><span class="st">`</span>(df, <span class="kw">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>, <span class="st">&quot;z&quot;</span>))</a>
<a class="sourceLine" id="cb258-6" data-line-number="6"></a>
<a class="sourceLine" id="cb258-7" data-line-number="7"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>) <span class="kw">print</span>(i)</a>
<a class="sourceLine" id="cb258-8" data-line-number="8"><span class="st">`</span><span class="dt">for</span><span class="st">`</span>(i, <span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="kw">print</span>(i))</a></code></pre></div>
<p>Suprisingly, in R, <code>for</code> can be called like a regular function! The same is true for basically every operation in R, which means that knowing the function name of a non-prefix function allows you to override its behaviour. For example, if you’re ever feeling particularly evil, run the following code while a friend is away from their computer. It will introduce a fun bug: 10% of the time, it will add 1 to any numeric calculation inside the parentheses.</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb259-1" data-line-number="1"><span class="st">`</span><span class="dt">(</span><span class="st">`</span> &lt;-<span class="st"> </span><span class="cf">function</span>(e1) {</a>
<a class="sourceLine" id="cb259-2" data-line-number="2">  <span class="cf">if</span> (<span class="kw">is.numeric</span>(e1) <span class="op">&amp;&amp;</span><span class="st"> </span><span class="kw">runif</span>(<span class="dv">1</span>) <span class="op">&lt;</span><span class="st"> </span><span class="fl">0.1</span>) {</a>
<a class="sourceLine" id="cb259-3" data-line-number="3">    e1 <span class="op">+</span><span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb259-4" data-line-number="4">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb259-5" data-line-number="5">    e1</a>
<a class="sourceLine" id="cb259-6" data-line-number="6">  }</a>
<a class="sourceLine" id="cb259-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb259-8" data-line-number="8"><span class="kw">replicate</span>(<span class="dv">50</span>, (<span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span>))</a>
<a class="sourceLine" id="cb259-9" data-line-number="9"><span class="co">#&gt;  [1] 3 3 3 3 3 3 3 3 3 3 3 3 4 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3 3</span></a>
<a class="sourceLine" id="cb259-10" data-line-number="10"><span class="co">#&gt; [39] 4 3 4 3 3 3 3 4 3 3 3 3</span></a>
<a class="sourceLine" id="cb259-11" data-line-number="11"><span class="kw">rm</span>(<span class="st">&quot;(&quot;</span>)</a></code></pre></div>
<p>Of course, overriding built-in functions like this is a bad idea, but, as you’ll learn in Section <a href="translation.html#html-env">21.2.5</a>, it’s possible to apply it only to selected code blocks. This provides a clean and elegant approach to writing domain specific languages and translators to other languages.</p>
<p>A more useful application comes up when using functional programming tools. For example, you could use <code>lapply()</code> to add 3 to every element of a list by first defining a function <code>add()</code>:</p>
<div class="sourceCode" id="cb260"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb260-1" data-line-number="1">add &lt;-<span class="st"> </span><span class="cf">function</span>(x, y) x <span class="op">+</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb260-2" data-line-number="2"><span class="kw">lapply</span>(<span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">4</span><span class="op">:</span><span class="dv">5</span>), add, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb260-3" data-line-number="3"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb260-4" data-line-number="4"><span class="co">#&gt; [1] 4 5 6</span></a>
<a class="sourceLine" id="cb260-5" data-line-number="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb260-6" data-line-number="6"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb260-7" data-line-number="7"><span class="co">#&gt; [1] 7 8</span></a></code></pre></div>
<p>But we can also get the same result simply by relying on the existing <code>+</code> function:</p>
<div class="sourceCode" id="cb261"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb261-1" data-line-number="1"><span class="kw">lapply</span>(<span class="kw">list</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="dv">4</span><span class="op">:</span><span class="dv">5</span>), <span class="st">`</span><span class="dt">+</span><span class="st">`</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb261-2" data-line-number="2"><span class="co">#&gt; [[1]]</span></a>
<a class="sourceLine" id="cb261-3" data-line-number="3"><span class="co">#&gt; [1] 4 5 6</span></a>
<a class="sourceLine" id="cb261-4" data-line-number="4"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb261-5" data-line-number="5"><span class="co">#&gt; [[2]]</span></a>
<a class="sourceLine" id="cb261-6" data-line-number="6"><span class="co">#&gt; [1] 7 8</span></a></code></pre></div>
<p>We’ll explore this idea in detail in Section <a href="functionals.html#functionals">9</a>.</p>
</div>
<div id="prefix-form" class="section level3">
<h3><span class="header-section-number">6.8.2</span> Prefix form</h3>
<p>
</p>
<p>The prefix form is the most common form in R code, and indeed in the majority of programming languages. Prefix calls in R are a little special because you can specify arguments in three ways:</p>
<ul>
<li>By position, like <code>help(mean)</code>.</li>
<li>Using partial matching, like <code>help(top = mean)</code>.</li>
<li>By name, like <code>help(topic = mean)</code>.</li>
</ul>
<p>As illustrated by the following chunk, arguments are matched by exact name, then with unique prefixes, and finally by position.</p>
<div class="sourceCode" id="cb262"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb262-1" data-line-number="1">k01 &lt;-<span class="st"> </span><span class="cf">function</span>(abcdef, bcde1, bcde2) {</a>
<a class="sourceLine" id="cb262-2" data-line-number="2">  <span class="kw">list</span>(<span class="dt">a =</span> abcdef, <span class="dt">b1 =</span> bcde1, <span class="dt">b2 =</span> bcde2)</a>
<a class="sourceLine" id="cb262-3" data-line-number="3">}</a>
<a class="sourceLine" id="cb262-4" data-line-number="4"><span class="kw">str</span>(<span class="kw">k01</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>))</a>
<a class="sourceLine" id="cb262-5" data-line-number="5"><span class="co">#&gt; List of 3</span></a>
<a class="sourceLine" id="cb262-6" data-line-number="6"><span class="co">#&gt;  $ a : num 1</span></a>
<a class="sourceLine" id="cb262-7" data-line-number="7"><span class="co">#&gt;  $ b1: num 2</span></a>
<a class="sourceLine" id="cb262-8" data-line-number="8"><span class="co">#&gt;  $ b2: num 3</span></a>
<a class="sourceLine" id="cb262-9" data-line-number="9"><span class="kw">str</span>(<span class="kw">k01</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dt">abcdef =</span> <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb262-10" data-line-number="10"><span class="co">#&gt; List of 3</span></a>
<a class="sourceLine" id="cb262-11" data-line-number="11"><span class="co">#&gt;  $ a : num 1</span></a>
<a class="sourceLine" id="cb262-12" data-line-number="12"><span class="co">#&gt;  $ b1: num 2</span></a>
<a class="sourceLine" id="cb262-13" data-line-number="13"><span class="co">#&gt;  $ b2: num 3</span></a>
<a class="sourceLine" id="cb262-14" data-line-number="14"></a>
<a class="sourceLine" id="cb262-15" data-line-number="15"><span class="co"># Can abbreviate long argument names:</span></a>
<a class="sourceLine" id="cb262-16" data-line-number="16"><span class="kw">str</span>(<span class="kw">k01</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dt">a =</span> <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb262-17" data-line-number="17"><span class="co">#&gt; List of 3</span></a>
<a class="sourceLine" id="cb262-18" data-line-number="18"><span class="co">#&gt;  $ a : num 1</span></a>
<a class="sourceLine" id="cb262-19" data-line-number="19"><span class="co">#&gt;  $ b1: num 2</span></a>
<a class="sourceLine" id="cb262-20" data-line-number="20"><span class="co">#&gt;  $ b2: num 3</span></a>
<a class="sourceLine" id="cb262-21" data-line-number="21"></a>
<a class="sourceLine" id="cb262-22" data-line-number="22"><span class="co"># But this doesn&#39;t work because abbreviation is ambiguous</span></a>
<a class="sourceLine" id="cb262-23" data-line-number="23"><span class="kw">str</span>(<span class="kw">k01</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dt">b =</span> <span class="dv">1</span>))</a>
<a class="sourceLine" id="cb262-24" data-line-number="24"><span class="co">#&gt; Error in k01(1, 3, b = 1): argument 3 matches multiple formal arguments</span></a></code></pre></div>
<p>In general, use positional matching only for the first one or two arguments; they will be the most commonly used, and most readers will know what they are. Avoid using positional matching for less commonly used arguments, and never use partial matching. Unfortunately you can’t disable partial matching, but you can turn it into a warning with the <code>warnPartialMatchArgs</code> option:
</p>
<div class="sourceCode" id="cb263"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb263-1" data-line-number="1"><span class="kw">options</span>(<span class="dt">warnPartialMatchArgs =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb263-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">k01</span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb263-3" data-line-number="3"><span class="co">#&gt; Warning in k01(a = 1, 2, 3): partial argument match of &#39;a&#39; to &#39;abcdef&#39;</span></a></code></pre></div>
</div>
<div id="infix-functions" class="section level3">
<h3><span class="header-section-number">6.8.3</span> Infix functions</h3>
<p>

</p>
<p>Infix functions get their name from the fact the function name comes inbetween its arguments, and hence have two arguments. R comes with a number of built-in infix operators: <code>:</code>, <code>::</code>, <code>:::</code>, <code>$</code>, <code>@</code>, <code>^</code>, <code>*</code>, <code>/</code>, <code>+</code>, <code>-</code>, <code>&gt;</code>, <code>&gt;=</code>, <code>&lt;</code>, <code>&lt;=</code>, <code>==</code>, <code>!=</code>, <code>!</code>, <code>&amp;</code>, <code>&amp;&amp;</code>, <code>|</code>, <code>||</code>, <code>~</code>, <code>&lt;-</code>, and <code>&lt;&lt;-</code>. You can also create your own infix functions that start and end with <code>%</code>. Base R uses this pattern to define <code>%%</code>, <code>%*%</code>, <code>%/%</code>, <code>%in%</code>, <code>%o%</code>, and <code>%x%</code>.</p>
<p>Defining your own infix function is simple. You create a two argument function and bind it to a name that starts and ends with <code>%</code>:</p>
<div class="sourceCode" id="cb264"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb264-1" data-line-number="1"><span class="st">`</span><span class="dt">%+%</span><span class="st">`</span> &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) <span class="kw">paste0</span>(a, b)</a>
<a class="sourceLine" id="cb264-2" data-line-number="2"><span class="st">&quot;new &quot;</span> <span class="op">%+%</span><span class="st"> &quot;string&quot;</span></a>
<a class="sourceLine" id="cb264-3" data-line-number="3"><span class="co">#&gt; [1] &quot;new string&quot;</span></a></code></pre></div>
<p>The names of infix functions are more flexible than regular R functions: they can contain any sequence of characters except for <code>%</code>. You will need to escape any special characters in the string used to define the function, but not when you call it:</p>
<div class="sourceCode" id="cb265"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb265-1" data-line-number="1"><span class="st">`</span><span class="dt">% %</span><span class="st">`</span> &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) <span class="kw">paste</span>(a, b)</a>
<a class="sourceLine" id="cb265-2" data-line-number="2"><span class="st">`</span><span class="dt">%/</span><span class="ch">\\</span><span class="dt">%</span><span class="st">`</span> &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) <span class="kw">paste</span>(a, b)</a>
<a class="sourceLine" id="cb265-3" data-line-number="3"></a>
<a class="sourceLine" id="cb265-4" data-line-number="4"><span class="st">&quot;a&quot;</span> <span class="op">% %</span><span class="st"> &quot;b&quot;</span></a>
<a class="sourceLine" id="cb265-5" data-line-number="5"><span class="co">#&gt; [1] &quot;a b&quot;</span></a>
<a class="sourceLine" id="cb265-6" data-line-number="6"><span class="st">&quot;a&quot;</span> <span class="op">%/\%</span><span class="st"> &quot;b&quot;</span></a>
<a class="sourceLine" id="cb265-7" data-line-number="7"><span class="co">#&gt; [1] &quot;a b&quot;</span></a></code></pre></div>
<p>R’s default precedence rules mean that infix operators are composed left to right:</p>
<div class="sourceCode" id="cb266"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb266-1" data-line-number="1"><span class="st">`</span><span class="dt">%-%</span><span class="st">`</span> &lt;-<span class="st"> </span><span class="cf">function</span>(a, b) <span class="kw">paste0</span>(<span class="st">&quot;(&quot;</span>, a, <span class="st">&quot; %-% &quot;</span>, b, <span class="st">&quot;)&quot;</span>)</a>
<a class="sourceLine" id="cb266-2" data-line-number="2"><span class="st">&quot;a&quot;</span> <span class="op">%-%</span><span class="st"> &quot;b&quot;</span> <span class="op">%-%</span><span class="st"> &quot;c&quot;</span></a>
<a class="sourceLine" id="cb266-3" data-line-number="3"><span class="co">#&gt; [1] &quot;((a %-% b) %-% c)&quot;</span></a></code></pre></div>
<p>There are two special infix functions that can be called with a single argument: <code>+</code> and <code>-</code>.</p>
<div class="sourceCode" id="cb267"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb267-1" data-line-number="1"><span class="dv">-1</span></a>
<a class="sourceLine" id="cb267-2" data-line-number="2"><span class="co">#&gt; [1] -1</span></a>
<a class="sourceLine" id="cb267-3" data-line-number="3"><span class="op">+</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb267-4" data-line-number="4"><span class="co">#&gt; [1] 10</span></a></code></pre></div>
</div>
<div id="replacement-functions" class="section level3">
<h3><span class="header-section-number">6.8.4</span> Replacement functions</h3>
<p>

</p>
<p>Replacement functions act like they modify their arguments in place, and have the special name <code>xxx&lt;-</code>. They must have arguments named <code>x</code> and <code>value</code>, and must return the modified object. For example, the following function modifies the second element of a vector:</p>
<div class="sourceCode" id="cb268"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb268-1" data-line-number="1"><span class="st">`</span><span class="dt">second&lt;-</span><span class="st">`</span> &lt;-<span class="st"> </span><span class="cf">function</span>(x, value) {</a>
<a class="sourceLine" id="cb268-2" data-line-number="2">  x[<span class="dv">2</span>] &lt;-<span class="st"> </span>value</a>
<a class="sourceLine" id="cb268-3" data-line-number="3">  x</a>
<a class="sourceLine" id="cb268-4" data-line-number="4">}</a></code></pre></div>
<p>Replacement functions are used by placing the function call on the left side of <code>&lt;-</code>:</p>
<div class="sourceCode" id="cb269"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb269-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb269-2" data-line-number="2"><span class="kw">second</span>(x) &lt;-<span class="st"> </span>5L</a>
<a class="sourceLine" id="cb269-3" data-line-number="3">x</a>
<a class="sourceLine" id="cb269-4" data-line-number="4"><span class="co">#&gt;  [1]  1  5  3  4  5  6  7  8  9 10</span></a></code></pre></div>
<p>I say they act like they modify their arguments in place, because, as explained in Section <a href="names-values.html#modify-in-place">2.5</a>, they actually create a modified copy. We can see that by using <code>tracemem()</code>:</p>
<div class="sourceCode" id="cb270"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb270-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">10</span></a>
<a class="sourceLine" id="cb270-2" data-line-number="2"><span class="kw">tracemem</span>(x)</a>
<a class="sourceLine" id="cb270-3" data-line-number="3"><span class="co">#&gt; &lt;0x7ffae71bd880&gt;</span></a>
<a class="sourceLine" id="cb270-4" data-line-number="4"></a>
<a class="sourceLine" id="cb270-5" data-line-number="5"><span class="kw">second</span>(x) &lt;-<span class="st"> </span>6L</a>
<a class="sourceLine" id="cb270-6" data-line-number="6"><span class="co">#&gt; tracemem[0x7ffae71bd880 -&gt; 0x7ffae61b5480]: </span></a>
<a class="sourceLine" id="cb270-7" data-line-number="7"><span class="co">#&gt; tracemem[0x7ffae61b5480 -&gt; 0x7ffae73f0408]: second&lt;- </span></a></code></pre></div>
<p>If your replacement function needs additional arguments, place them between <code>x</code> and <code>value</code>, and call the replacement function with additional arguments on the left:</p>
<div class="sourceCode" id="cb271"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb271-1" data-line-number="1"><span class="st">`</span><span class="dt">modify&lt;-</span><span class="st">`</span> &lt;-<span class="st"> </span><span class="cf">function</span>(x, position, value) {</a>
<a class="sourceLine" id="cb271-2" data-line-number="2">  x[position] &lt;-<span class="st"> </span>value</a>
<a class="sourceLine" id="cb271-3" data-line-number="3">  x</a>
<a class="sourceLine" id="cb271-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb271-5" data-line-number="5"><span class="kw">modify</span>(x, <span class="dv">1</span>) &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb271-6" data-line-number="6">x</a>
<a class="sourceLine" id="cb271-7" data-line-number="7"><span class="co">#&gt;  [1] 10  5  3  4  5  6  7  8  9 10</span></a></code></pre></div>
<p>When you write <code>modify(x, 1) &lt;- 10</code>, behind the scenes R turns it into:</p>
<div class="sourceCode" id="cb272"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb272-1" data-line-number="1">x &lt;-<span class="st"> `</span><span class="dt">modify&lt;-</span><span class="st">`</span>(x, <span class="dv">1</span>, <span class="dv">10</span>)</a></code></pre></div>
<p>Combining replacement with other functions requires more complex translation. For example:</p>
<div class="sourceCode" id="cb273"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb273-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dt">a =</span> <span class="dv">1</span>, <span class="dt">b =</span> <span class="dv">2</span>, <span class="dt">c =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb273-2" data-line-number="2"><span class="kw">names</span>(x)</a>
<a class="sourceLine" id="cb273-3" data-line-number="3"><span class="co">#&gt; [1] &quot;a&quot; &quot;b&quot; &quot;c&quot;</span></a>
<a class="sourceLine" id="cb273-4" data-line-number="4"></a>
<a class="sourceLine" id="cb273-5" data-line-number="5"><span class="kw">names</span>(x)[<span class="dv">2</span>] &lt;-<span class="st"> &quot;two&quot;</span></a>
<a class="sourceLine" id="cb273-6" data-line-number="6"><span class="kw">names</span>(x)</a>
<a class="sourceLine" id="cb273-7" data-line-number="7"><span class="co">#&gt; [1] &quot;a&quot;   &quot;two&quot; &quot;c&quot;</span></a></code></pre></div>
<p>is translated into:</p>
<div class="sourceCode" id="cb274"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb274-1" data-line-number="1"><span class="st">`</span><span class="dt">*tmp*</span><span class="st">`</span> &lt;-<span class="st"> </span>x</a>
<a class="sourceLine" id="cb274-2" data-line-number="2">x &lt;-<span class="st"> `</span><span class="dt">names&lt;-</span><span class="st">`</span>(<span class="st">`</span><span class="dt">*tmp*</span><span class="st">`</span>, <span class="st">`</span><span class="dt">[&lt;-</span><span class="st">`</span>(<span class="kw">names</span>(<span class="st">`</span><span class="dt">*tmp*</span><span class="st">`</span>), <span class="dv">2</span>, <span class="st">&quot;two&quot;</span>))</a>
<a class="sourceLine" id="cb274-3" data-line-number="3"><span class="kw">rm</span>(<span class="st">`</span><span class="dt">*tmp*</span><span class="st">`</span>)</a></code></pre></div>
<p>(Yes, it really does create a local variable named <code>*tmp*</code>, which is removed afterwards.)</p>
</div>
<div id="special-forms" class="section level3">
<h3><span class="header-section-number">6.8.5</span> Special forms</h3>
<p>
</p>
<p>Finally, there are a bunch of language features that are usually written in special ways, but also have prefix forms. These include parentheses:</p>
<ul>
<li><code>(x)</code> (<code>`(`(x)</code>)</li>
<li><code>{x}</code> (<code>`{`(x)</code>).</li>
</ul>
<p>The subsetting operators:</p>
<ul>
<li><code>x[i]</code> (<code>`[`(x, i)</code>)</li>
<li><code>x[[i]]</code> (<code>`[[`(x, i)</code>)</li>
</ul>
<p>And the tools of control flow:</p>
<ul>
<li><code>if (cond) true</code> (<code>`if`(cond, true)</code>)</li>
<li><code>if (cond) true else false</code> (<code>`if`(cond, true, false)</code>)</li>
<li><code>for(var in seq) action</code> (<code>`for`(var, seq, action)</code>)</li>
<li><code>while(cond) action</code> (<code>`while`(cond, action)</code>)</li>
<li><code>repeat expr</code> (<code>`repeat`(expr)</code>)</li>
<li><code>next</code> (<code>`next`()</code>)</li>
<li><code>break</code> (<code>`break`()</code>)</li>
</ul>
<p>Finally, the most complex is the <code>function</code> function:</p>
<ul>
<li><code>function(arg1, arg2) {body}</code> (<code>`function`(alist(arg1, arg2), body, env)</code>)</li>
</ul>
<p>Knowing the name of the function that underlies a special form is useful for getting documentation: <code>?(</code> is a syntax error; <code>?`(`</code> will give you the documentation for parentheses.</p>
<p>All special forms are implemented as primitive functions (i.e. in C); this means printing these functions is not informative:</p>
<div class="sourceCode" id="cb275"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb275-1" data-line-number="1"><span class="st">`</span><span class="dt">for</span><span class="st">`</span></a>
<a class="sourceLine" id="cb275-2" data-line-number="2"><span class="co">#&gt; .Primitive(&quot;for&quot;)</span></a></code></pre></div>
</div>
<div id="exercises-5" class="section level3">
<h3><span class="header-section-number">6.8.6</span> Exercises</h3>
<ol style="list-style-type: decimal">
<li><p>Rewrite the following code snippets into prefix form:</p>
<div class="sourceCode" id="cb276"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb276-1" data-line-number="1"><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb276-2" data-line-number="2"></a>
<a class="sourceLine" id="cb276-3" data-line-number="3"><span class="dv">1</span> <span class="op">+</span><span class="st"> </span>(<span class="dv">2</span> <span class="op">+</span><span class="st"> </span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb276-4" data-line-number="4"></a>
<a class="sourceLine" id="cb276-5" data-line-number="5"><span class="cf">if</span> (<span class="kw">length</span>(x) <span class="op">&lt;=</span><span class="st"> </span><span class="dv">5</span>) x[[<span class="dv">5</span>]] <span class="cf">else</span> x[[n]]</a></code></pre></div></li>
<li><p>Clarify the following list of odd function calls:</p>
<div class="sourceCode" id="cb277"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb277-1" data-line-number="1">x &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="dt">replace =</span> <span class="ot">TRUE</span>, <span class="dv">20</span>, <span class="dt">x =</span> <span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="ot">NA</span>))</a>
<a class="sourceLine" id="cb277-2" data-line-number="2">y &lt;-<span class="st"> </span><span class="kw">runif</span>(<span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">1</span>, <span class="dv">20</span>)</a>
<a class="sourceLine" id="cb277-3" data-line-number="3"><span class="kw">cor</span>(<span class="dt">m =</span> <span class="st">&quot;k&quot;</span>, <span class="dt">y =</span> y, <span class="dt">u =</span> <span class="st">&quot;p&quot;</span>, <span class="dt">x =</span> x)</a></code></pre></div></li>
<li><p>Explain why the following code fails:</p>
<div class="sourceCode" id="cb278"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb278-1" data-line-number="1"><span class="kw">modify</span>(<span class="kw">get</span>(<span class="st">&quot;x&quot;</span>), <span class="dv">1</span>) &lt;-<span class="st"> </span><span class="dv">10</span></a>
<a class="sourceLine" id="cb278-2" data-line-number="2"><span class="co">#&gt; Error: target of assignment expands to non-language object</span></a></code></pre></div></li>
<li><p>Create a replacement function that modifies a random location in a vector.</p></li>
<li><p>Write your own version of <code>+</code> that pastes its inputs together if they are
character vectors but behaves as usual otherwise. In other words, make this
code work:</p>
<div class="sourceCode" id="cb279"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb279-1" data-line-number="1"><span class="dv">1</span> <span class="op">+</span><span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb279-2" data-line-number="2"><span class="co">#&gt; [1] 3</span></a>
<a class="sourceLine" id="cb279-3" data-line-number="3"></a>
<a class="sourceLine" id="cb279-4" data-line-number="4"><span class="st">&quot;a&quot;</span> <span class="op">+</span><span class="st"> &quot;b&quot;</span></a>
<a class="sourceLine" id="cb279-5" data-line-number="5"><span class="co">#&gt; [1] &quot;ab&quot;</span></a></code></pre></div></li>
<li><p>Create a list of all the replacement functions found in the base package.
Which ones are primitive functions? (Hint: use <code>apropos()</code>.)</p></li>
<li><p>What are valid names for user-created infix functions?</p></li>
<li><p>Create an infix <code>xor()</code> operator.</p></li>
<li><p>Create infix versions of the set functions <code>intersect()</code>, <code>union()</code>, and
<code>setdiff()</code>. You might call them <code>%n%</code>, <code>%u%</code>, and <code>%/%</code> to match
conventions from mathematics.</p></li>
</ol>
</div>
</div>
<div id="function-answers" class="section level2">
<h2><span class="header-section-number">6.9</span> Quiz answers</h2>
<ol style="list-style-type: decimal">
<li><p>The three components of a function are its body, arguments, and environment.</p></li>
<li><p><code>f1(1)()</code> returns 11.</p></li>
<li><p>You’d normally write it in infix style: <code>1 + (2 * 3)</code>.</p></li>
<li><p>Rewriting the call to <code>mean(c(1:10, NA), na.rm = TRUE)</code> is easier to
understand.</p></li>
<li><p>No, it does not throw an error because the second argument is never used
so it’s never evaluated.</p></li>
<li><p>See Sections <a href="functions.html#infix-functions">6.8.3</a> and <a href="functions.html#replacement-functions">6.8.4</a>.</p></li>
<li><p>You use <code>on.exit()</code>; see Section <a href="functions.html#on-exit">6.7.4</a> for details.</p></li>
</ol>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-magrittr">
<p>Bache, Stefan Milton, and Hadley Wickham. 2014. <em>Magrittr: A Forward-Pipe Operator for R</em>. <a href="http://magrittr.tidyverse.org/">http://magrittr.tidyverse.org/</a>.</p>
</div>
<div id="ref-withr">
<p>Hester, Jim, Kirill Müller, Kevin Ushey, Hadley Wickham, and Winston Chang. 2018. <em>Withr: Run Code with Temporarily Modified Global State</em>. <a href="http://withr.r-lib.org">http://withr.r-lib.org</a>.</p>
</div>
</div>
<div class="footnotes">
<hr />
<ol start="25">
<li id="fn25"><p>I’ll “hide” the answers to these challenges in the footnotes. Try solving them before looking at the answer; this will help you to better remember the correct answer. In this case, <code>g01()</code> will return <code>20</code>.<a href="functions.html#fnref25" class="footnote-back">↩</a></p></li>
<li id="fn26"><p>Functions that automatically quote one or more arguments can override the default scoping rules to implement other varieties of scoping. You’ll learn more about that in Chapter <a href="evaluation.html#evaluation">20</a>.<a href="functions.html#fnref26" class="footnote-back">↩</a></p></li>
<li id="fn27"><p><code>g04()</code> returns <code>c(1, 2, 3)</code>.<a href="functions.html#fnref27" class="footnote-back">↩</a></p></li>
<li id="fn28"><p><code>g11()</code> returns <code>1</code> every time it’s called.<a href="functions.html#fnref28" class="footnote-back">↩</a></p></li>
<li id="fn29"><p>Functions can exit in other more esoteric ways like signalling a condition that is caught by an exit handler, invoking a restart, or pressing “Q” in an interactive browser.<a href="functions.html#fnref29" class="footnote-back">↩</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="control-flow.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="environments.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": false,
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/hadley/adv-r/edit/master/Functions.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
